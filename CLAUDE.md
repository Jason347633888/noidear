# ğŸš¨ æ–‡æ¡£ç®¡ç†ç³»ç»Ÿ - AI Agent æŒ‡å—

> **é‡è¦**: åœ¨å¼€å§‹ä»»ä½•å¼€å‘å·¥ä½œä¹‹å‰ï¼Œå¿…é¡»å…ˆé˜…è¯» `.claude/` ç›®å½•ä¸‹çš„æ‰€æœ‰è§„åˆ™æ–‡ä»¶

---

## ğŸš¨ AIå¿…é¡»éµå®ˆçš„æ ¸å¿ƒè§„åˆ™ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰

### ç»å¯¹ç¦æ­¢ âŒ
- âŒ å¼•å…¥æœªåœ¨æ–‡æ¡£ä¸­åˆ—å‡ºçš„åº“
- âŒ æ›´æ¢æ¡†æ¶ï¼ˆVue 3 â†’ React, NestJS â†’ Expressï¼‰
- âŒ ä¿®æ”¹é¡¹ç›®ç›®å½•ç»“æ„
- âŒ æ·»åŠ MVPèŒƒå›´å¤–çš„åŠŸèƒ½ï¼ˆPhase 7-14ï¼‰
- âŒ ç¡¬ç¼–ç å¯†ç /å¯†é’¥
- âŒ å¼ºåˆ¶æ¨é€ Gitï¼ˆforce pushï¼‰
- âŒ æœ¬åœ°å®‰è£…è¿è¡Œ Docker å·²æœ‰çš„æœåŠ¡ï¼ˆPostgreSQL/Redis/MinIOï¼‰

### å¿…é¡»éµå¾ª âœ…
- âœ… ä½¿ç”¨ Element Plus ç»„ä»¶åº“
- âœ… ä½¿ç”¨ Prisma ORMï¼ˆç¦æ­¢è£¸SQLï¼‰
- âœ… ä½¿ç”¨æ–‡æ¡£ä¸­çš„APIç«¯ç‚¹
- âœ… æŒ‰ Prisma Schema åˆ›å»ºæ•°æ®è¡¨
- âœ… ç¯å¢ƒå˜é‡å­˜å‚¨æ•æ„Ÿä¿¡æ¯
- âœ… ä¸­æ–‡ commit message
- âœ… æ‰€æœ‰APIå¿…é¡»æœ‰å¼‚å¸¸å¤„ç†ï¼ˆtry-catchï¼‰
- âœ… PostgreSQL/Redis/MinIO å¿…é¡»é€šè¿‡ Docker è¿è¡Œï¼ˆç¦æ­¢æœ¬åœ°å®‰è£…ï¼‰

### ğŸ¯ Coding Principleï¼ˆå¼ºåˆ¶æ ‡å‡†ï¼‰âœ…
| åŸåˆ™ | å…·ä½“è¦æ±‚ |
|------|----------|
| **Good Taste** | æ¶ˆé™¤è¾¹ç•Œä¼˜äºå¢åŠ åˆ¤æ–­ï¼Œå‡½æ•°<50è¡Œï¼Œç¼©è¿›<3å±‚ |
| **Never break userspace** | å‘åå…¼å®¹æ€§ç¥åœ£ä¸å¯ä¾µçŠ¯ |
| **å®ç”¨ä¸»ä¹‰** | å…ˆç¡®è®¤çœŸé—®é¢˜ï¼Œå¯»æ‰¾æœ€ç®€æ–¹æ¡ˆ |
| **ç›´æ¥çŠ€åˆ©** | æŠ€æœ¯æ‰¹è¯„ç›´æ¥ï¼Œä¸å§”å©‰ä¸æ¨¡ç³Š |

### æ–‡ä»¶ç±»å‹é™åˆ¶ ğŸ“
- âœ… ä»…æ”¯æŒï¼šPDFã€Wordã€Excel
- âœ… å•æ–‡ä»¶æœ€å¤§ï¼š10MB
- âœ… å¿…é¡»ä¸Šä¼ åˆ° MinIOï¼ˆç¦æ­¢å­˜æ•°æ®åº“ï¼‰

---

## å¿«é€Ÿå¼€å§‹

1. **å…ˆè¯»æ–‡æ¡£**: ä¾æ¬¡é˜…è¯» `.claude/` ç›®å½•ä¸‹çš„è§„åˆ™æ–‡ä»¶
2. **ç†è§£çº¦æŸ**: ç†Ÿæ‚‰ `rules/constraints.mdc` çš„27ç« çº¦æŸï¼ˆåŒ…å«Coding Principle + Dockerï¼‰
3. **æ£€æŸ¥èŒƒå›´**: ç¡®è®¤ä½ è¦åšçš„åŠŸèƒ½åœ¨ MVP Phase 1-6 èŒƒå›´å†…
4. **å‚è€ƒè®¾è®¡**: å¯¹ç…§ `docs/` ç›®å½•ä¸‹çš„è®¾è®¡æ–‡æ¡£

---

## ğŸ“‹ å®ç°å‰æ£€æŸ¥æ¸…å•ï¼ˆå¿…é¡»é€é¡¹é€šè¿‡ï¼‰

åœ¨å®ç°ä»»ä½•åŠŸèƒ½å‰ï¼ŒAI/Agent **å¿…é¡»**å›ç­”ä»¥ä¸‹é—®é¢˜ï¼š

### æŠ€æœ¯é€‰å‹æ£€æŸ¥
```
â–¡ 1. è¿™ä¸ªåŠŸèƒ½åœ¨ MVP Phase 1-6 èŒƒå›´å†…å—ï¼Ÿ
â–¡ 2. è¿™ä¸ªåº“åœ¨æŠ€æœ¯æ ˆæ¸…å•é‡Œå—ï¼Ÿï¼ˆå‰ç«¯ï¼šdayjs/lodash-esï¼›åç«¯ï¼šxlsx/bcrypt/jsonwebtoken/class-validatorï¼‰
â–¡ 3. è¿™ä¸ªæ¡†æ¶æ˜¯æ–‡æ¡£ä¸­æŒ‡å®šçš„æ¡†æ¶å—ï¼Ÿï¼ˆVue 3 / NestJSï¼‰
â–¡ 3a. æ–°å¢ç±»å‹å®šä¹‰æ”¾åœ¨ packages/types/ äº†å—ï¼Ÿ
```

### ä»£ç è§„èŒƒæ£€æŸ¥
```
â–¡ 4. è¿™ä¸ªUIç¬¦åˆ Element Plus è§„èŒƒå—ï¼Ÿ
â–¡ 5. è¿™ä¸ªAPIç«¯ç‚¹åœ¨æ–‡æ¡£é‡Œå—ï¼Ÿ
â–¡ 6. è¿™æ ·æ”¹ä¼šç ´åç°æœ‰ç»“æ„å—ï¼Ÿ
â–¡ 7. ç›¸åŒåŠŸèƒ½æ˜¯å¦å·²å­˜åœ¨å…¬å…±å‡½æ•°/ç»„ä»¶ï¼Ÿ
```

### å®‰å…¨æ£€æŸ¥
```
â–¡ 8. å¯†ç /å¯†é’¥ç¡¬ç¼–ç äº†å—ï¼Ÿ
â–¡ 9. æ•æ„Ÿä¿¡æ¯å†™å…¥æ—¥å¿—äº†å—ï¼Ÿ
â–¡ 10. è¾“å…¥éªŒè¯åšäº†å—ï¼Ÿ
â–¡ 11. æƒé™æ£€æŸ¥åšäº†å—ï¼Ÿ
â–¡ 12. æ–‡ä»¶ç±»å‹/å¤§å°æ˜¯å¦é™åˆ¶ï¼Ÿ
```

### ä»£ç è´¨é‡æ£€æŸ¥
```
â–¡ 13. å¼‚å¸¸å¤„ç†æ˜¯å¦å®Œæ•´ï¼Ÿ
â–¡ 14. ESLint/Prettier èƒ½é€šè¿‡å—ï¼Ÿ
â–¡ 15. å‡½æ•°é•¿åº¦ < 50è¡Œå—ï¼Ÿ
â–¡ 16. é‡å¤ä»£ç æå–äº†å—ï¼Ÿ
```

### æµ‹è¯•æ£€æŸ¥
```
â–¡ 17. æœ‰å¯¹åº”çš„æµ‹è¯•å—ï¼Ÿï¼ˆæ ¸å¿ƒé€»è¾‘å¿…é¡»æœ‰æµ‹è¯•ï¼‰
```

### Coding Principle æ£€æŸ¥
```
â–¡ 18. æ˜¯å¦æ¶ˆé™¤äº†è¾¹ç•Œæƒ…å†µï¼Ÿï¼ˆGood Tasteï¼‰
â–¡ 19. ç¼©è¿›æ˜¯å¦è¶…è¿‡3å±‚ï¼Ÿï¼ˆGood Tasteï¼‰
â–¡ 20. æ˜¯å¦æ»¡è¶³å‘åå…¼å®¹ï¼Ÿï¼ˆNever break userspaceï¼‰
â–¡ 21. æ˜¯å¦éªŒè¯äº†è¿™æ˜¯çœŸé—®é¢˜ï¼Ÿï¼ˆå®ç”¨ä¸»ä¹‰ï¼‰
â–¡ 22. æ²Ÿé€šæ˜¯å¦ç›´æ¥çŠ€åˆ©ï¼Ÿï¼ˆæ²Ÿé€šé£æ ¼ï¼‰
```

**ä»»ä½•ä¸€é¡¹æ£€æŸ¥ä¸é€šè¿‡ï¼Œå¿…é¡»åœæ­¢å®ç°ï¼Œå…ˆè§£å†³é—®é¢˜ï¼**

---

## æ–‡æ¡£ç´¢å¼•

| æ–‡ä»¶ | ç”¨é€” | é˜…è¯»ä¼˜å…ˆçº§ |
|------|------|------------|
| [rules/constraints.mdc](rules/constraints.mdc) | AIå®ç°çº¦æŸæ¸…å• | æœ€é«˜ |
| [rules/tech-stack.mdc](rules/tech-stack.mdc) | æŠ€æœ¯é€‰å‹è§„èŒƒ | é«˜ |
| [rules/ui-standards.mdc](rules/ui-standards.mdc) | UIè®¾è®¡æ ‡å‡† | é«˜ |
| [rules/api-spec.mdc](rules/api-spec.mdc) | APIè®¾è®¡è§„èŒƒ | é«˜ |
| [rules/database.mdc](rules/database.mdc) | æ•°æ®åº“è§„èŒƒ | ä¸­ |
| [rules/git-flow.mdc](rules/git-flow.mdc) | Gitæäº¤è§„èŒƒ | ä¸­ |

## å®Œæ•´æ–‡æ¡£

| æ–‡æ¡£ | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| **éœ€æ±‚è®¾è®¡** | `docs/DESIGN.md` | å®Œæ•´åŠŸèƒ½ã€è§„åˆ™ã€æ•°æ®æ¨¡å‹ |
| **æµ‹è¯•ç”¨ä¾‹** | `docs/TEST-CASES.md` | 548ä¸ªæµ‹è¯•ç”¨ä¾‹ |
| **é¡¹ç›®ç»“æ„** | `docs/PROJECT_STRUCTURE.md` | æ–‡ä»¶å¯¼èˆª + å‰ç«¯å¼€å‘è®¡åˆ’ |
| **README** | `README.md` | å¿«é€Ÿå¼€å§‹ã€è®¿é—®åœ°å€ |

## å…³é”®çº¦æŸï¼ˆå¿…è¯»ï¼‰

### ç»å¯¹ç¦æ­¢
- âŒ å¼•å…¥æœªåœ¨æ–‡æ¡£ä¸­åˆ—å‡ºçš„åº“
- âŒ æ›´æ¢æ¡†æ¶ï¼ˆVue 3 â†’ Reactï¼‰
- âŒ ä¿®æ”¹é¡¹ç›®ç›®å½•ç»“æ„
- âŒ æ·»åŠ MVPèŒƒå›´å¤–çš„åŠŸèƒ½
- âŒ ç¡¬ç¼–ç å¯†ç /å¯†é’¥
- âŒ æœ¬åœ°å®‰è£…è¿è¡Œ PostgreSQL/Redis/MinIOï¼ˆå¿…é¡»ç”¨ Dockerï¼‰

### å¿…é¡»éµå¾ª
- âœ… ä½¿ç”¨ Element Plus ç»„ä»¶åº“
- âœ… ä½¿ç”¨æ–‡æ¡£ä¸­çš„APIç«¯ç‚¹
- âœ… æŒ‰ Prisma Schema åˆ›å»ºæ•°æ®è¡¨
- âœ… ç¯å¢ƒå˜é‡å­˜å‚¨æ•æ„Ÿä¿¡æ¯
- âœ… ä¸­æ–‡ commit message
- âœ… æ‰€æœ‰APIå¿…é¡»æœ‰å¼‚å¸¸å¤„ç†ï¼ˆtry-catchï¼‰
- âœ… PostgreSQL/Redis/MinIO å¿…é¡»é€šè¿‡ Docker è¿è¡Œ

### ESLint é…ç½®
- **å‰ç«¯**: Antfu ESLint Configï¼ˆä¸¥æ ¼æ¨¡å¼ï¼‰
- **åç«¯**: NestJS é»˜è®¤é…ç½®
- **è§„åˆ™**: `no-console` æŠ¥é”™ã€`no-unused-vars` æŠ¥é”™ã€`prefer-const` å¼ºåˆ¶

## æ£€æŸ¥æ¸…å•

å®ç°å‰å›ç­”ï¼š

```
1. åŠŸèƒ½åœ¨ MVP Phase 1-6 èŒƒå›´å†…ï¼Ÿ
2. åº“åœ¨æŠ€æœ¯æ ˆæ¸…å•é‡Œï¼Ÿ
3. UI ç”¨ Element Plusï¼Ÿ
4. API ç«¯ç‚¹åœ¨æ–‡æ¡£é‡Œï¼Ÿ
5. å¯†ç ç”¨ç¯å¢ƒå˜é‡ï¼Ÿ
6. PostgreSQL/Redis/MinIO ç”¨ Dockerï¼Ÿ
```

## ç¦æ­¢çš„è¡Œä¸º

è§ [rules/constraints.mdc](rules/constraints.mdc)

---

**é¡¹ç›®çŠ¶æ€**: å¼€å‘è®¡åˆ’å·²å®Œå–„ï¼Œå¼€å§‹å®æ–½
**æ–‡æ¡£ç‰ˆæœ¬**: 2.4
**æ›´æ–°å†…å®¹**: æ·»åŠ è°ƒè¯•ç»éªŒè®°å½•ï¼ˆå‡å°‘é‡å¤é—®é¢˜ï¼‰

---

## ğŸ“š è°ƒè¯•ç»éªŒè®°å½•

> æœ¬ç« èŠ‚è®°å½•æµ‹è¯•/å¼€å‘ä¸­é‡åˆ°çš„é—®é¢˜åŠè§£å†³æ–¹æ¡ˆï¼Œé¿å…é‡å¤è¸©å‘

### å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

#### 1. å‰ç«¯å¯¼å…¥é—®é¢˜

| é—®é¢˜ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|----------|
| `Dashboard.vue` å¯¼å…¥ `{ request }` æŠ¥é”™ | request.ts æ˜¯é»˜è®¤å¯¼å‡ºï¼Œåº”ä½¿ç”¨ `import request` | æ£€æŸ¥å¯¼å‡ºæ–¹å¼ï¼šé»˜è®¤å¯¼å‡ºç”¨ `import x`ï¼Œå‘½åå¯¼å‡ºç”¨ `import { x }` |
| `Layout.vue` è·¯ç”±ç›‘å¬æŠ¥é”™ `route.afterEach is not a function` | `useRoute()` è¿”å› Route å¯¹è±¡ï¼Œæ²¡æœ‰ `afterEach` æ–¹æ³• | åº”ä½¿ç”¨ `router.afterEach`ï¼Œä» `useRouter()` è·å– router å®ä¾‹ |

**æ’æŸ¥æ–¹æ³•**ï¼š
```typescript
// ç¡®è®¤å¯¼å…¥æ¥æº
import { useRoute, useRouter } from 'vue-router';

const route = useRoute();    // Route å¯¹è±¡ï¼Œæ—  afterEach
const router = useRouter();  // Router å®ä¾‹ï¼Œæœ‰ afterEach
```

#### 2. æ„å»ºé—®é¢˜

| é—®é¢˜ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|----------|
| `vue-tsc` ç¼–è¯‘æŠ¥é”™ | Node.js v25 ä¸ vue-tsc å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ | ä½¿ç”¨ `vite build` æ›¿ä»£ï¼Œæˆ–é™çº§ Node.js |
| `vite build` æŠ¥é”™æ¨¡å—æœªæ‰¾åˆ° | çƒ­æ›´æ–°æœªç”Ÿæ•ˆ | é‡å¯ Vite å¼€å‘æœåŠ¡å™¨ |
| åç«¯å¯åŠ¨ `@prisma/client did not initialize` | Prisma Client æœªç”Ÿæˆ | è¿è¡Œ `npx prisma generate --schema=src/prisma/schema.prisma` |

**éªŒè¯å‘½ä»¤**ï¼š
```bash
# å‰ç«¯æ„å»º
npx vite build

# åç«¯æ„å»º
npm run build

# Prisma ç”Ÿæˆ
npx prisma generate --schema=src/prisma/schema.prisma
```

#### 3. E2E æµ‹è¯•é—®é¢˜

| é—®é¢˜ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|----------|
| Chrome DevTools MCP å…ƒç´  UID å˜åŒ– | é¡µé¢åˆ·æ–°å DOM å…ƒç´ é‡æ–°ç”Ÿæˆ UID | æ¯æ¬¡æ“ä½œå‰é‡æ–° `take_snapshot` è·å–æœ€æ–° UID |
| é¡µé¢å¯¼èˆªåå…ƒç´ ä¸å¯è§ | å¯¼èˆªæ˜¯å¼‚æ­¥çš„ | ä½¿ç”¨ `wait_for` ç­‰å¾…æ–°é¡µé¢åŠ è½½å®Œæˆ |

**æµ‹è¯•æµç¨‹**ï¼š
```typescript
// 1. å…ˆè·å–é¡µé¢å¿«ç…§
await mcp__chrome-devtools__take_snapshot();

// 2. è·å–å…ƒç´  UID
// 3. æ‰§è¡Œæ“ä½œ
await mcp__chrome-devtools__click({ uid: 'xxx' });

// 4. å¯¼èˆªåç­‰å¾…
await mcp__chrome-devtools__wait_for({ text: 'ç›®æ ‡æ–‡æœ¬', timeout: 5000 });
```

#### 4. Worktree å¼€å‘ç¯å¢ƒé—®é¢˜

| é—®é¢˜ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|----------|
| worktree Prisma ç”Ÿæˆå¤±è´¥ | worktree ç›®å½•ä¸‹ç¼ºå°‘ Prisma schema | ä»ä¸»åˆ†æ”¯å¤åˆ¶ schema æˆ–ä½¿ç”¨ `npx prisma generate --schema=ä¸»è·¯å¾„/server/src/prisma/schema.prisma` |
| åç«¯æœåŠ¡ç«¯å£å†²çª | å¤šä¸ªæœåŠ¡å®ä¾‹è¿è¡Œ | `lsof -ti:3000 \| xargs kill -9` æ¸…ç†æ®‹ç•™è¿›ç¨‹ |

**Worktree åˆå§‹åŒ–**ï¼š
```bash
# åˆ›å»º worktree
git worktree add .worktrees/feature-name -b feature-name

# Prisma ç”Ÿæˆï¼ˆä½¿ç”¨ä¸»åˆ†æ”¯ schemaï¼‰
cd .worktrees/feature-name/server
npx prisma generate --schema=../server/src/prisma/schema.prisma
```

#### 5. ESLint é…ç½®ç¼ºå¤±

| é—®é¢˜ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|----------|
| å‰ç«¯/åç«¯ ESLint æŠ¥é”™æ‰¾ä¸åˆ°é…ç½® | é¡¹ç›®ç¼ºå°‘ `.eslintrc.*` æˆ– `eslint.config.*` | å½“å‰ç‰ˆæœ¬æš‚ä¸æ”¯æŒï¼Œç­‰å¾…åç»­é…ç½® |

**ä¸´æ—¶éªŒè¯**ï¼š
```bash
# ä½¿ç”¨ vite build æ›¿ä»£ lint
npx vite build
```

---

### é—®é¢˜æ’æŸ¥æµç¨‹

1. **æ„å»ºå¤±è´¥** â†’ æ£€æŸ¥ `vite build` / `npm run build`
2. **è¿è¡Œæ—¶é”™è¯¯** â†’ æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å° `list_console_messages`
3. **è·¯ç”±é”™è¯¯** â†’ æ£€æŸ¥ `router.afterEach` vs `route.afterEach`
4. **å¯¼å…¥é”™è¯¯** â†’ æ£€æŸ¥å¯¼å‡ºæ–¹å¼æ˜¯é»˜è®¤è¿˜æ˜¯å‘½å
5. **Prisma é”™è¯¯** â†’ è¿è¡Œ `npx prisma generate`

---

### è°ƒè¯•å‘½ä»¤é€ŸæŸ¥

```bash
# æ¸…ç†å¹¶é‡å¯å‰ç«¯
lsof -ti:5173 | xargs kill -9 && npx vite --host 0.0.0.0 --port 5173

# é‡å¯åç«¯
lsof -ti:3000 | xargs kill -9 && npm run start:prod

# Prisma ç”Ÿæˆ
npx prisma generate --schema=src/prisma/schema.prisma

# æ„å»ºéªŒè¯
npx vite build && npm run build
```
