# 技术栈清单

> **来源**: DESIGN.md + package.json  
> **文档版本**: 1.0  
> **最后更新**: 2026-02-14  
> **项目名称**: BRCGS 体系认证文档管理系统  
> **技术选型原则**: 稳定性 > 生态完善 > 社区活跃

---

## 目录

- [1. 前端技术栈](#1-前端技术栈)
- [2. 后端技术栈](#2-后端技术栈)
- [3. 数据库与存储](#3-数据库与存储)
- [4. 运维与监控](#4-运维与监控)
- [5. 移动端技术栈](#5-移动端技术栈)
- [6. 开发工具](#6-开发工具)
- [7. 测试框架](#7-测试框架)

---

## 1. 前端技术栈

### 1.1 核心框架

| 技术 | 版本 | 用途 | 官网 |
|------|------|------|------|
| **Vue 3** | ^3.4.0 | 前端 MVVM 框架 | https://vuejs.org |
| **TypeScript** | ^5.3.0 | 类型安全 | https://www.typescriptlang.org |
| **Vite** | ^5.0.0 | 构建工具 | https://vitejs.dev |
| **Pinia** | ^2.1.0 | 状态管理 | https://pinia.vuejs.org |
| **Vue Router** | ^4.2.0 | 路由管理 | https://router.vuejs.org |

---

### 1.2 UI 组件库

| 技术 | 版本 | 用途 | 官网 |
|------|------|------|------|
| **Element Plus** | ^2.5.0 | UI 组件库（必须使用） | https://element-plus.org |
| **@element-plus/icons-vue** | ^2.3.0 | 图标库 | - |

---

### 1.3 工具库

| 技术 | 版本 | 用途 | 说明 |
|------|------|------|------|
| **Axios** | ^1.6.0 | HTTP 请求 | API 通信 |
| **dayjs** | ^1.11.0 | 日期处理（必须使用） | 轻量级 Moment.js 替代 |
| **lodash-es** | ^4.17.0 | 工具函数（必须使用） | 防抖、节流、深拷贝等 |
| **nprogress** | ^0.2.0 | 进度条 | 页面加载进度 |
| **js-cookie** | ^3.0.0 | Cookie 管理 | Token 存储 |

---

### 1.4 PDF 预览

| 技术 | 版本 | 用途 | 说明 |
|------|------|------|------|
| **vue-pdf-embed** | ^2.1.0 | PDF 预览 | 文档在线预览 |
| **pdfjs-dist** | ^3.11.0 | PDF.js 核心库 | PDF 渲染 |

---

### 1.5 表单与富文本（v2.0.0 计划）

| 技术 | 版本 | 用途 | 状态 |
|------|------|------|------|
| **@tiptap/vue-3** | ^2.1.0 | 富文本编辑器 | 待引入（v2.0.0） |
| **@tiptap/starter-kit** | ^2.1.0 | Tiptap 基础扩展包 | 待引入（v2.0.0） |

---

### 1.6 流程图与可视化（v2.0.0 计划）

| 技术 | 版本 | 用途 | 状态 |
|------|------|------|------|
| **@vue-flow/core** | ^1.30.0 | 流程图组件 | 待引入（v2.0.0） |
| **@vue-flow/background** | ^1.3.0 | 流程图背景 | 待引入（v2.0.0） |
| **@vue-flow/controls** | ^1.1.0 | 流程图控制 | 待引入（v2.0.0） |
| **echarts** | ^5.4.0 | 图表库 | 数据可视化 |

---

### 1.7 代码规范

| 技术 | 版本 | 用途 | 说明 |
|------|------|------|------|
| **@antfu/eslint-config** | ^2.6.0 | ESLint 配置（严格模式） | 代码规范 |
| **eslint** | ^8.56.0 | 代码检查 | - |
| **prettier** | ^3.2.0 | 代码格式化 | - |
| **@vue/eslint-config-typescript** | ^12.0.0 | TypeScript ESLint 配置 | - |

---

## 2. 后端技术栈

### 2.1 核心框架

| 技术 | 版本 | 用途 | 官网 |
|------|------|------|------|
| **NestJS** | ^10.3.0 | Node.js 后端框架 | https://nestjs.com |
| **TypeScript** | ^5.3.0 | 类型安全 | https://www.typescriptlang.org |
| **Node.js** | ^20.11.0 | 运行时环境 | https://nodejs.org |

---

### 2.2 数据库 ORM

| 技术 | 版本 | 用途 | 说明 |
|------|------|------|------|
| **Prisma** | ^5.8.0 | ORM（必须使用，禁止裸 SQL） | 类型安全、迁移管理 |
| **@prisma/client** | ^5.8.0 | Prisma 客户端 | - |

---

### 2.3 认证与授权

| 技术 | 版本 | 用途 | 说明 |
|------|------|------|------|
| **@nestjs/jwt** | ^10.2.0 | JWT 认证 | Token 生成与验证 |
| **@nestjs/passport** | ^10.0.0 | 认证中间件 | Passport.js 集成 |
| **passport-jwt** | ^4.0.0 | JWT 策略 | - |
| **passport-local** | ^1.0.0 | 本地登录策略 | - |
| **bcrypt** | ^5.1.0 | 密码加密（必须使用） | bcrypt 哈希 |

---

### 2.4 验证与校验

| 技术 | 版本 | 用途 | 说明 |
|------|------|------|------|
| **class-validator** | ^0.14.0 | DTO 验证（必须使用） | 装饰器验证 |
| **class-transformer** | ^0.5.0 | 类型转换 | DTO 转换 |

---

### 2.5 文件处理

| 技术 | 版本 | 用途 | 说明 |
|------|------|------|------|
| **minio** | ^7.1.0 | MinIO 客户端 | 对象存储 |
| **multer** | ^1.4.5 | 文件上传 | NestJS 集成 |
| **xlsx** | ^0.18.0 | Excel 处理（必须使用） | 数据导出 |
| **pdfkit** | ^0.14.0 | PDF 生成 | 培训档案、审核报告 PDF |

---

### 2.6 任务队列（v2.0.0 计划）

| 技术 | 版本 | 用途 | 状态 |
|------|------|------|------|
| **bullmq** | ^5.1.0 | 任务队列 | 待引入（v2.0.0 文档引用同步） |
| **@nestjs/bull** | ^10.0.0 | Bull 集成 | 待引入（v2.0.0） |

---

### 2.7 监控与日志（Phase A 基础设施）

| 技术 | 版本 | 用途 | 状态 |
|------|------|------|------|
| **@willsoto/nestjs-prometheus** | ^5.4.0 | Prometheus 集成 | 待引入（Phase A） |
| **prom-client** | ^15.1.0 | Prometheus 客户端 | 待引入（Phase A） |
| **winston** | ^3.11.0 | 日志库 | 结构化日志 |

---

### 2.8 其他工具

| 技术 | 版本 | 用途 | 说明 |
|------|------|------|------|
| **jsonwebtoken** | ^9.0.0 | JWT 生成（必须使用） | Token 工具 |
| **dayjs** | ^1.11.0 | 日期处理 | 与前端统一 |
| **uuid** | ^9.0.0 | UUID 生成 | - |
| **nanoid** | ^5.0.0 | 短 ID 生成 | - |

---

## 3. 数据库与存储

### 3.1 数据库

| 技术 | 版本 | 用途 | 部署方式 |
|------|------|------|----------|
| **PostgreSQL** | 15 | 关系型数据库（必须使用） | Docker 容器 |
| **Redis** | 7 | 缓存 + 会话存储 | Docker 容器 |

---

### 3.2 对象存储

| 技术 | 版本 | 用途 | 部署方式 |
|------|------|------|----------|
| **MinIO** | latest | 对象存储（必须使用） | Docker 容器 |

**MinIO Bucket 清单**：
- `documents` - 一级/二级/三级文件
- `templates` - 模板文件
- `audit-archive` - 审计日志归档

---

## 4. 运维与监控

### 4.1 容器化

| 技术 | 版本 | 用途 | 说明 |
|------|------|------|------|
| **Docker** | ^24.0.0 | 容器化 | 服务隔离 |
| **Docker Compose** | ^2.20.0 | 容器编排 | 一键部署 |

---

### 4.2 监控栈（Phase A 基础设施）

| 技术 | 版本 | 用途 | 部署方式 |
|------|------|------|----------|
| **Prometheus** | ^2.48.0 | 指标采集 | Docker 容器 |
| **Grafana** | ^10.2.0 | 可视化仪表板 | Docker 容器 |
| **Loki** | ^2.9.0 | 日志聚合 | Docker 容器 |
| **Promtail** | ^2.9.0 | 日志采集 | Docker 容器 |
| **Alertmanager** | ^0.26.0 | 告警管理 | Docker 容器 |

---

### 4.3 反向代理

| 技术 | 版本 | 用途 | 部署方式 |
|------|------|------|----------|
| **Nginx** | ^1.25.0 | 反向代理 + 静态文件服务 | Docker 容器 |

---

## 5. 移动端技术栈

### 5.1 跨平台框架

| 技术 | 版本 | 用途 | 支持平台 |
|------|------|------|----------|
| **uniapp** | 最新版 | 跨平台开发框架 | 微信小程序 + H5 + APP |
| **Vue 3** | 最新版 | 前端框架 | - |
| **TypeScript** | 最新版 | 类型安全 | - |

---

### 5.2 UI 组件

| 技术 | 版本 | 用途 | 说明 |
|------|------|------|------|
| **uni-ui** | 最新版 | uniapp 官方 UI 组件库 | - |

---

### 5.3 状态管理

| 技术 | 版本 | 用途 | 说明 |
|------|------|------|------|
| **Pinia** | 最新版 | 状态管理 | 与 Web 端统一 |

---

## 6. 开发工具

### 6.1 包管理器

| 技术 | 版本 | 用途 | 说明 |
|------|------|------|------|
| **npm** | ^10.0.0 | 包管理器 | Node.js 默认 |
| **pnpm** | ^8.14.0 | 包管理器（可选） | 更快、更省空间 |

---

### 6.2 代码编辑器

| 工具 | 推荐插件 | 说明 |
|------|----------|------|
| **VS Code** | Volar, ESLint, Prettier, Prisma | - |
| **WebStorm** | - | JetBrains IDE |

---

### 6.3 版本控制

| 技术 | 用途 | 说明 |
|------|------|------|
| **Git** | 版本控制 | - |
| **GitHub** | 代码托管 | - |

---

## 7. 测试框架

### 7.1 单元测试

| 技术 | 版本 | 用途 | 说明 |
|------|------|------|------|
| **Vitest** | ^1.2.0 | 单元测试（前端） | Vite 原生支持 |
| **Jest** | ^29.7.0 | 单元测试（后端） | NestJS 默认 |
| **@nestjs/testing** | ^10.3.0 | NestJS 测试工具 | - |

---

### 7.2 端到端测试

| 技术 | 版本 | 用途 | 说明 |
|------|------|------|------|
| **Playwright** | ^1.40.0 | E2E 测试 | 跨浏览器测试 |

---

### 7.3 测试覆盖率

| 技术 | 用途 | 目标覆盖率 |
|------|------|-----------|
| **c8** | 前端覆盖率 | ≥ 80% |
| **Jest Coverage** | 后端覆盖率 | ≥ 80% |

---

## 技术选型原则

### 原则 1：稳定性优先
- 优先选择成熟稳定的技术
- 避免使用过于新颖或未经验证的技术
- 关键依赖必须有长期支持（LTS）

### 原则 2：生态完善
- 优先选择生态完善、文档齐全的技术
- 确保有足够的社区支持和学习资源
- 避免使用冷门或维护不活跃的库

### 原则 3：团队熟悉度
- 优先选择团队熟悉的技术栈
- 降低学习成本和开发风险
- 提高开发效率和代码质量

### 原则 4：性能与安全
- 选择性能优异的技术方案
- 必须满足安全合规要求（BRCGS 认证）
- 避免已知安全漏洞的库

---

## 禁止使用的技术

| 技术 | 原因 | 替代方案 |
|------|------|----------|
| **Moment.js** | 已停止维护 | dayjs |
| **jQuery** | 不适合现代框架 | Vue 3 |
| **裸 SQL** | 不类型安全 | Prisma ORM |
| **本地 PostgreSQL** | 环境不一致 | Docker PostgreSQL |
| **本地 Redis** | 环境不一致 | Docker Redis |
| **本地 MinIO** | 环境不一致 | Docker MinIO |

---

## 技术栈更新记录

| 日期 | 变更内容 | 原因 |
|------|----------|------|
| 2026-02-14 | 初始化技术栈清单 | 项目启动 |
| - | 计划引入 Tiptap（v2.0.0） | 智能文档引擎 |
| - | 计划引入 Vue Flow（v2.0.0） | 工作流可视化 |
| - | 计划引入 BullMQ（v2.0.0） | 异步任务队列 |
| - | 计划引入 Prometheus（Phase A） | 系统监控 |

---

**本文档完成 ✅**
