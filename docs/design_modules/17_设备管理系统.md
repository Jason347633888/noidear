# è®¾å¤‡ç®¡ç†ç³»ç»Ÿï¼ˆLayer 1 æ ¸å¿ƒç”Ÿäº§ï¼‰

> **æ¥æº**: DESIGN.md ç¬¬åå…«ç« ï¼ˆè®¾å¤‡ç®¡ç†ç³»ç»Ÿï¼‰  
> **æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
> **æœ€åæ›´æ–°**: 2026-02-14  
> **å®ç°çŠ¶æ€**: â³ æœªå®ç°ï¼ˆPRD + LLD å·²å®Œæˆï¼‰  
> **ä¼˜å…ˆçº§**: â­â­ é«˜ï¼ˆPhase B æ ¸å¿ƒç”Ÿäº§ï¼‰  
> **ä¾èµ–**: åŠ¨æ€è¡¨å•å¼•æ“ã€TodoTask ç»Ÿä¸€å¾…åŠã€v2.0 å·¥ä½œæµå¼•æ“ã€ç§»åŠ¨ç«¯åº”ç”¨

---

## ç›®å½•

- [1. ç³»ç»Ÿå®šä½](#1-ç³»ç»Ÿå®šä½)
- [2. æ ¸å¿ƒèŒè´£](#2-æ ¸å¿ƒèŒè´£)
- [3. ä¸šåŠ¡æµç¨‹](#3-ä¸šåŠ¡æµç¨‹)
- [4. æ•°æ®æ¨¡å‹](#4-æ•°æ®æ¨¡å‹)
- [5. ä¸šåŠ¡è§„åˆ™](#5-ä¸šåŠ¡è§„åˆ™)
- [6. API è®¾è®¡](#6-api-è®¾è®¡)
- [7. å‰ç«¯è®¾è®¡](#7-å‰ç«¯è®¾è®¡)

---

## 1. ç³»ç»Ÿå®šä½

**è®¾å¤‡ç®¡ç†ç³»ç»Ÿä½œä¸ºç‹¬ç«‹ä¸šåŠ¡æ¨¡å—**ï¼Œè´Ÿè´£å·¥å‚æ‰€æœ‰è®¾å¤‡çš„å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚

### 1.1 æ ¸å¿ƒä¼˜åŠ¿

| ä¼˜åŠ¿ | è¯´æ˜ |
|------|------|
| **è‡ªåŠ¨åŒ–æé†’** | æ ¹æ®ç»´æŠ¤å‘¨æœŸè‡ªåŠ¨ç”Ÿæˆå¾…åŠä»»åŠ¡ï¼Œæå‰æé†’ |
| **ç§»åŠ¨ç«¯æ”¯æŒ** | ç°åœºç»´ä¿å¯ç›´æ¥åœ¨æ‰‹æœºå¡«å†™ï¼Œæ‹ç…§ä¸Šä¼  |
| **æ•°æ®ç”µå­åŒ–** | ç»´ä¿è®°å½•åœ¨çº¿å¡«å†™ï¼Œæ•°æ®åº“å­˜å‚¨ï¼Œå¯è¿½æº¯ |
| **æ—¥å†å¯è§†åŒ–** | ç»´æŠ¤è®¡åˆ’æ—¥å†è§†å›¾ï¼Œä¸€ç›®äº†ç„¶ |
| **å®¡æ‰¹æµç¨‹** | ç»´ä¿è®°å½•éœ€ä¸Šçº§å®¡æ ¸é€šè¿‡ï¼Œå…³é—­å¾…åŠ |
| **ç¦»çº¿å¡«å†™** | æ— ç½‘ç»œç¯å¢ƒä¹Ÿèƒ½å¡«å†™ï¼Œè”ç½‘åè‡ªåŠ¨åŒæ­¥ |

---

## 2. æ ¸å¿ƒèŒè´£

1. **è®¾å¤‡å°è´¦ç®¡ç†**: è®¾å¤‡åŸºç¡€ä¿¡æ¯ã€åˆ†ç±»ã€çŠ¶æ€ç®¡ç†
2. **ç»´æŠ¤ä¿å…»è®¡åˆ’**: è‡ªåŠ¨ç”Ÿæˆç»´æŠ¤è®¡åˆ’ã€åˆ°æœŸæé†’ã€æ—¥å†è§†å›¾
3. **ç»´ä¿è®°å½•ç®¡ç†**: åœ¨çº¿å¡«å†™ç»´ä¿è®°å½•ã€ç§»åŠ¨ç«¯æ‹ç…§ã€å®¡æ‰¹æµç¨‹
4. **è®¾å¤‡æŠ¥ä¿®åŠŸèƒ½**: æ‰€æœ‰å‘˜å·¥å¯å‘èµ·æŠ¥ä¿®ï¼Œå·¥ç¨‹éƒ¨æ¥å•å¤„ç†
5. **è®¾å¤‡ç»Ÿè®¡åˆ†æ**: æ•…éšœç‡ã€ä½¿ç”¨ç‡ã€ç»´ä¿æˆæœ¬åˆ†æ
6. **ç§»åŠ¨ç«¯æ”¯æŒ**: ç°åœºå¡«å†™ã€æ‹ç…§ä¸Šä¼ ã€ç”µå­ç­¾åã€ç¦»çº¿å¡«å†™

---

## 3. ä¸šåŠ¡æµç¨‹

### 3.1 æ ¸å¿ƒæµç¨‹

```
1. è®¾å¤‡å°è´¦å½•å…¥
   å·¥ç¨‹éƒ¨å½•å…¥è®¾å¤‡ä¿¡æ¯ â†’ è®¾ç½®ç»´æŠ¤å‘¨æœŸ â†’ è®¾ç½®è´£ä»»äºº

2. ç»´æŠ¤è®¡åˆ’è‡ªåŠ¨ç”Ÿæˆ
   ç³»ç»Ÿæ ¹æ®ç»´æŠ¤å‘¨æœŸ â†’ è‡ªåŠ¨è®¡ç®—ä¸‹æ¬¡ç»´æŠ¤æ—¥æœŸ â†’ ç”Ÿæˆç»´æŠ¤è®¡åˆ’

3. åˆ°æœŸæé†’
   ç»´æŠ¤æ—¥æœŸä¸´è¿‘ â†’ æå‰ N å¤©ç”Ÿæˆå¾…åŠä»»åŠ¡ â†’ é€šçŸ¥è´£ä»»äººï¼ˆå¾®ä¿¡/ç«™å†…ä¿¡ï¼‰

4. ç»´ä¿æ‰§è¡Œï¼ˆç§»åŠ¨ç«¯ï¼‰
   è´£ä»»äººæŸ¥çœ‹å¾…åŠ â†’ ç°åœºç»´ä¿ â†’ å¡«å†™ç»´ä¿è®°å½• â†’ æ‹ç…§ä¸Šä¼  â†’ ç”µå­ç­¾å

5. ç»´ä¿è®°å½•å®¡æ‰¹
   æäº¤ç»´ä¿è®°å½• â†’ ç”Ÿæˆå®¡æ‰¹å¾…åŠ â†’ ä¸Šçº§å®¡æ ¸ â†’ å®¡æ‰¹é€šè¿‡ â†’ å…³é—­å¾…åŠ

6. ä¸‹æ¬¡ç»´æŠ¤è®¡åˆ’
   ç³»ç»Ÿè‡ªåŠ¨è®¡ç®—ä¸‹æ¬¡ç»´æŠ¤æ—¥æœŸ â†’ ç”Ÿæˆæ–°çš„ç»´æŠ¤è®¡åˆ’

7. è®¾å¤‡æŠ¥ä¿®æµç¨‹
   å‘˜å·¥å‘èµ·æŠ¥ä¿® â†’ ç”Ÿæˆå¾…åŠç»™å·¥ç¨‹éƒ¨ â†’ å·¥ç¨‹éƒ¨æ¥å• â†’ ç°åœºç»´ä¿® â†’ å®Œæˆå·¥å•

8. è®¾å¤‡ç»Ÿè®¡åˆ†æ
   ç»Ÿè®¡ç»´ä¿æ¬¡æ•°ã€æ•…éšœç‡ã€ç»´ä¿æˆæœ¬ â†’ ç”Ÿæˆåˆ†ææŠ¥è¡¨
```

### 3.2 å…³é”®ä¸šåŠ¡åœºæ™¯

**åœºæ™¯ 1: è®¾å¤‡å°è´¦å½•å…¥**
1. å·¥ç¨‹éƒ¨å½•å…¥æ–°è®¾å¤‡
   - è®¾å¤‡ç¼–å·: EQ-001
   - è®¾å¤‡åç§°: æ…æ‹ŒæœºA
   - è®¾å¤‡å‹å·: JB-2000
   - åˆ†ç±»: ç”Ÿäº§è®¾å¤‡
   - ä½ç½®: ç”Ÿäº§è½¦é—´1æ¥¼
   - è´­ä¹°æ—¥æœŸ: 2024-01-01
   - å¯ç”¨æ—¥æœŸ: 2024-01-15
   - ç»´æŠ¤å‘¨æœŸ: 30 å¤©
   - æå‰æé†’: 3 å¤©
   - è´£ä»»äºº: å¼ ä¸‰

2. ç³»ç»Ÿè‡ªåŠ¨è®¡ç®—ä¸‹æ¬¡ç»´æŠ¤æ—¥æœŸ
   - ä¸‹æ¬¡ç»´æŠ¤æ—¥æœŸ = å¯ç”¨æ—¥æœŸ + ç»´æŠ¤å‘¨æœŸ = 2024-02-14

3. ç³»ç»Ÿç”Ÿæˆç»´æŠ¤è®¡åˆ’
   - è®¡åˆ’ç¼–å·: MP-20240214-001
   - è®¾å¤‡: æ…æ‹ŒæœºA
   - è®¡åˆ’æ—¥æœŸ: 2024-02-14
   - çŠ¶æ€: å¾…æ‰§è¡Œ

**åœºæ™¯ 2: ç»´ä¿æé†’ä¸æ‰§è¡Œï¼ˆç§»åŠ¨ç«¯ï¼‰**
1. ç³»ç»Ÿè‡ªåŠ¨æé†’ï¼ˆ2024-02-11ï¼‰
   - è·ç¦»ç»´æŠ¤æ—¥æœŸè¿˜æœ‰ 3 å¤©
   - ç”Ÿæˆå¾…åŠä»»åŠ¡ï¼ˆTodoTaskï¼‰
   - å‘é€å¾®ä¿¡é€šçŸ¥ç»™å¼ ä¸‰

2. å¼ ä¸‰æ”¶åˆ°é€šçŸ¥ï¼ˆå¾®ä¿¡å°ç¨‹åºï¼‰
   - æŸ¥çœ‹å¾…åŠä»»åŠ¡
   - ç‚¹å‡»"å¼€å§‹ç»´ä¿"

3. ç°åœºç»´ä¿ï¼ˆç§»åŠ¨ç«¯å¡«å†™ï¼‰
   - è®¾å¤‡ç¼–å·: EQ-001ï¼ˆè‡ªåŠ¨å¸¦å‡ºï¼‰
   - è®¾å¤‡åç§°: æ…æ‹ŒæœºAï¼ˆè‡ªåŠ¨å¸¦å‡ºï¼‰
   - ç»´ä¿æ—¥æœŸ: 2024-02-14ï¼ˆé»˜è®¤ä»Šå¤©ï¼‰
   - ç»´ä¿ç±»å‹: æ—¥å¸¸ä¿å…»
   - ç»´ä¿å†…å®¹: æ¸…æ´æ…æ‹Œå¶ç‰‡ã€æ£€æŸ¥è½´æ‰¿ã€åŠ æ¶¦æ»‘æ²¹
   - ç»´ä¿å‰çŠ¶æ€: æ­£å¸¸
   - ç»´ä¿åçŠ¶æ€: æ­£å¸¸
   - ç°åœºç…§ç‰‡: [æ‹ç…§ä¸Šä¼  3 å¼ ]
   - æ›´æ¢é›¶ä»¶: æ— 
   - ç»´ä¿äººå‘˜ç­¾å: [æ‰‹å†™ç­¾å­—æ¿ç­¾å]

4. æäº¤ç»´ä¿è®°å½•
   - ç”Ÿæˆè®°å½•ç¼–å·: MAINT-20240214-001
   - çŠ¶æ€: å¾…å®¡æ‰¹
   - ç”Ÿæˆå®¡æ‰¹å¾…åŠä»»åŠ¡ç»™å·¥ç¨‹éƒ¨ç»ç†

5. ç¦»çº¿å¡«å†™ï¼ˆå¯é€‰ï¼‰
   - å¦‚æœç°åœºæ— ç½‘ç»œï¼Œæ•°æ®å­˜å‚¨åˆ°æœ¬åœ°
   - è”ç½‘åè‡ªåŠ¨åŒæ­¥åˆ°æœåŠ¡å™¨

**åœºæ™¯ 3: ç»´ä¿è®°å½•å®¡æ‰¹**
1. å·¥ç¨‹éƒ¨ç»ç†æ”¶åˆ°å®¡æ‰¹å¾…åŠ
   - æŸ¥çœ‹ç»´ä¿è®°å½•è¯¦æƒ…ï¼ˆPC æˆ–ç§»åŠ¨ç«¯ï¼‰
   - æŸ¥çœ‹ç°åœºç…§ç‰‡
   - æŸ¥çœ‹ç»´ä¿äººå‘˜ç­¾å

2. å®¡æ‰¹é€šè¿‡
   - å®¡æ‰¹æ„è§: ç»´ä¿è®°å½•å®Œæ•´ï¼Œé€šè¿‡
   - å®¡æ‰¹äººç­¾å: [æ‰‹å†™ç­¾å­—æ¿ç­¾å]

3. ç³»ç»Ÿè‡ªåŠ¨å¤„ç†
   - ç»´ä¿è®°å½•çŠ¶æ€: å·²å®¡æ‰¹
   - å…³é—­ç»´ä¿å¾…åŠä»»åŠ¡
   - è®¡ç®—ä¸‹æ¬¡ç»´æŠ¤æ—¥æœŸ: 2024-03-15
   - ç”Ÿæˆä¸‹æ¬¡ç»´æŠ¤è®¡åˆ’

**åœºæ™¯ 4: æ—¥å†è§†å›¾æŸ¥çœ‹**
å·¥ç¨‹éƒ¨ç»ç†æ‰“å¼€æ—¥å†è§†å›¾:

```
2024 å¹´ 2 æœˆ:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å‘¨æ—¥ å‘¨ä¸€ å‘¨äºŒ å‘¨ä¸‰ å‘¨å›› å‘¨äº” å‘¨å…­     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  28   29   30   31    1    2    3   â”‚
â”‚                       ğŸ”§  ğŸ”§        â”‚
â”‚   4    5    6    7    8    9   10   â”‚
â”‚  ğŸ”§              ğŸ”§                  â”‚
â”‚  11   12   13   14   15   16   17   â”‚
â”‚             ğŸ”§  ğŸ”§                   â”‚
â”‚  18   19   20   21   22   23   24   â”‚
â”‚                                      â”‚
â”‚  25   26   27   28   29              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å›¾ä¾‹: ğŸ”§ = ç»´æŠ¤è®¡åˆ’

ç‚¹å‡»æŸä¸€å¤©:
- æ˜¾ç¤ºå½“å¤©æ‰€æœ‰ç»´æŠ¤è®¡åˆ’
- æ…æ‹ŒæœºAï¼ˆæ—¥å¸¸ä¿å…»ï¼‰
- çƒ¤ç®±Bï¼ˆå¹´åº¦æ£€ä¿®ï¼‰
- åŒ…è£…æœºCï¼ˆæ•…éšœç»´ä¿®ï¼‰
```

**åœºæ™¯ 5: è®¾å¤‡æŠ¥ä¿®æµç¨‹ï¼ˆæ–°å¢ï¼‰**
1. æ™®é€šå‘˜å·¥å‘ç°è®¾å¤‡æ•…éšœ
   - æ‰“å¼€ç§»åŠ¨ç«¯ â†’ è®¾å¤‡æŠ¥ä¿®
   - é€‰æ‹©åŒºåŸŸ: ç”Ÿäº§è½¦é—´1æ¥¼
   - é€‰æ‹©è®¾å¤‡: æ…æ‹ŒæœºAï¼ˆç³»ç»Ÿè‡ªåŠ¨è¿‡æ»¤è¯¥åŒºåŸŸè®¾å¤‡ï¼‰
   - æ•…éšœæè¿°: æ…æ‹Œæœºå™ªéŸ³å¼‚å¸¸ï¼Œç–‘ä¼¼è½´æ‰¿æŸå
   - ç´§æ€¥ç¨‹åº¦: ç´§æ€¥
   - æ‹ç…§ä¸Šä¼ : 3 å¼ ç°åœºç…§ç‰‡
   - æäº¤æŠ¥ä¿®

2. ç³»ç»Ÿè‡ªåŠ¨å¤„ç†
   - ç”ŸæˆæŠ¥ä¿®å•å·: FR-20240215-001
   - çŠ¶æ€: å¾…å¤„ç†
   - è‡ªåŠ¨ç”Ÿæˆå¾…åŠä»»åŠ¡ç»™å·¥ç¨‹éƒ¨

3. å·¥ç¨‹éƒ¨äººå‘˜æ¥å•ï¼ˆç§»åŠ¨ç«¯ï¼‰
   - æŸ¥çœ‹æŠ¥ä¿®å•è¯¦æƒ…
   - ç‚¹å‡»"æ¥å•"
   - æŒ‡æ´¾ç»™: æå››
   - çŠ¶æ€å˜ä¸º: å¤„ç†ä¸­

4. æå››ç°åœºç»´ä¿®ï¼ˆç§»åŠ¨ç«¯ï¼‰
   - æ•…éšœåŸå› : è½´æ‰¿ç£¨æŸä¸¥é‡
   - å¤„ç†æªæ–½: æ›´æ¢æ–°è½´æ‰¿ã€åŠ æ¶¦æ»‘æ²¹ã€è°ƒè¯•æ­£å¸¸
   - ç°åœºç…§ç‰‡: 3 å¼ 
   - ç»´ä¿®äººå‘˜ç­¾å: [ç”µå­ç­¾å]
   - ç»´ä¿®è€—æ—¶: 120 åˆ†é’Ÿ
   - ç‚¹å‡»"å®Œæˆç»´ä¿®"

5. ç³»ç»Ÿè‡ªåŠ¨å¤„ç†
   - æŠ¥ä¿®å•çŠ¶æ€: å·²å®Œæˆ
   - å…³é—­å¾…åŠä»»åŠ¡
   - é€šçŸ¥æŠ¥ä¿®äºº

---

## 4. æ•°æ®æ¨¡å‹

### 4.1 æ ¸å¿ƒæ•°æ®è¡¨ï¼ˆ4 ä¸ªï¼‰

**è®¾å¤‡ç®¡ç†**:
1. Equipment - è®¾å¤‡å°è´¦è¡¨
2. MaintenancePlan - ç»´æŠ¤è®¡åˆ’è¡¨ï¼ˆæ”¯æŒåˆ†çº§ä¿å…»ï¼‰
3. MaintenanceRecord - ç»´ä¿è®°å½•è¡¨ï¼ˆå››çº§è®°å½•æ–‡ä»¶ï¼‰
4. EquipmentFault - è®¾å¤‡æŠ¥ä¿®å•è¡¨ï¼ˆæ–°å¢ï¼‰

### 4.2 è®¾å¤‡å°è´¦è¡¨ç¤ºä¾‹

```prisma
model Equipment {
  id                String   @id @default(cuid())
  code              String   @unique     // è®¾å¤‡ç¼–å·
  name              String              // è®¾å¤‡åç§°
  model             String?             // è®¾å¤‡å‹å·
  category          String              // åˆ†ç±»ï¼ˆç”Ÿäº§è®¾å¤‡/æ£€éªŒè®¾å¤‡/è¾…åŠ©è®¾å¤‡ï¼‰
  location          String?             // ä½ç½®ï¼ˆè½¦é—´/æ¥¼å±‚ï¼‰
  purchaseDate      DateTime?           // è´­ä¹°æ—¥æœŸ
  commissionDate    DateTime?           // å¯ç”¨æ—¥æœŸ
  status            String   @default("active") // active | inactive | scrapped
  
  // ============ åˆ†çº§ä¿å…»é…ç½®ï¼ˆæ–°å¢ï¼‰============
  maintenanceConfig Json?               // ä¿å…»é…ç½® JSONï¼Œç¤ºä¾‹ï¼š
                                        // {
                                        //   "daily": { "enabled": true, "cycle": 1, "reminderDays": 0 },
                                        //   "weekly": { "enabled": true, "cycle": 7, "reminderDays": 1 },
                                        //   "monthly": { "enabled": true, "cycle": 30, "reminderDays": 3 },
                                        //   "quarterly": { "enabled": false, "cycle": 90, "reminderDays": 7 },
                                        //   "annual": { "enabled": true, "cycle": 365, "reminderDays": 14 }
                                        // }
  
  responsiblePerson String?             // è´£ä»»äºº ID
  responsibleName   String?             // è´£ä»»äººå§“å
  manufacturer      String?             // åˆ¶é€ å•†
  serialNumber      String?             // åºåˆ—å·
  warrantyExpiry    DateTime?           // ä¿ä¿®åˆ°æœŸæ—¥æœŸ
  remark            String?             // å¤‡æ³¨
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
  
  // å…³è”
  maintenanceRecords MaintenanceRecord[] // ç»´ä¿è®°å½•
  maintenancePlans   MaintenancePlan[]   // ç»´æŠ¤è®¡åˆ’
  faults             EquipmentFault[]    // æŠ¥ä¿®å•ï¼ˆæ–°å¢ï¼‰
  
  @@map("equipment")
}
```

### 4.3 ç»´æŠ¤è®¡åˆ’è¡¨ç¤ºä¾‹ï¼ˆæ”¯æŒåˆ†çº§ä¿å…»ï¼‰

```prisma
model MaintenancePlan {
  id                String   @id @default(cuid())
  planNumber        String   @unique     // è®¡åˆ’ç¼–å·
  equipmentId       String              // è®¾å¤‡ ID
  equipmentCode     String              // è®¾å¤‡ç¼–å·ï¼ˆå†—ä½™ï¼‰
  equipmentName     String              // è®¾å¤‡åç§°ï¼ˆå†—ä½™ï¼‰
  plannedDate       DateTime            // è®¡åˆ’ç»´æŠ¤æ—¥æœŸ
  
  // ============ åˆ†çº§ä¿å…»å­—æ®µï¼ˆæ–°å¢ï¼‰============
  maintenanceLevel  String              // ä¿å…»çº§åˆ«ï¼šdaily | weekly | monthly | quarterly | annual
  
  maintenanceType   String   @default("routine") // routine | repair | annual
  status            String   @default("pending") // pending | in_progress | completed | cancelled
  responsiblePerson String?             // è´£ä»»äºº ID
  responsibleName   String?             // è´£ä»»äººå§“å
  reminderDays      Int      @default(3) // æå‰æé†’å¤©æ•°ï¼ˆä¸åŒçº§åˆ«ä¸åŒï¼‰
  reminderSent      Boolean  @default(false) // æ˜¯å¦å·²å‘é€æé†’
  todoTaskId        String?             // å¾…åŠä»»åŠ¡ ID
  completedAt       DateTime?           // å®Œæˆæ—¶é—´
  remark            String?             // å¤‡æ³¨
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
  
  // å…³è”
  equipment         Equipment @relation(fields: [equipmentId], references: [id])
  
  @@index([equipmentId])
  @@index([maintenanceLevel])
  @@index([plannedDate])
  @@map("maintenance_plans")
}
```

### 4.4 ç»´ä¿è®°å½•è¡¨ç¤ºä¾‹

```prisma
model MaintenanceRecord {
  id                  String   @id @default(cuid())
  recordNumber        String   @unique     // è®°å½•ç¼–å·
  equipmentId         String              // è®¾å¤‡ ID
  equipmentCode       String              // è®¾å¤‡ç¼–å·ï¼ˆå†—ä½™ï¼‰
  equipmentName       String              // è®¾å¤‡åç§°ï¼ˆå†—ä½™ï¼‰
  maintenanceDate     DateTime            // ç»´ä¿æ—¥æœŸ
  
  // ============ åˆ†çº§ä¿å…»å­—æ®µï¼ˆæ–°å¢ï¼‰============
  maintenanceLevel    String?             // ä¿å…»çº§åˆ«ï¼šdaily | weekly | monthly | quarterly | annual
  
  maintenanceType     String              // ç±»å‹ï¼ˆæ—¥å¸¸ä¿å…»/æ•…éšœç»´ä¿®/å¹´åº¦æ£€ä¿®ï¼‰
  maintenanceContent  String              // ç»´ä¿å†…å®¹
  statusBefore        String?             // ç»´ä¿å‰çŠ¶æ€
  statusAfter         String?             // ç»´ä¿åçŠ¶æ€
  replacedParts       String?             // æ›´æ¢çš„é›¶ä»¶
  photos              Json?               // ç°åœºç…§ç‰‡ï¼ˆæ•°ç»„ï¼‰
  maintenancePerson   String              // ç»´ä¿äººå‘˜ ID
  maintenancePersonName String            // ç»´ä¿äººå‘˜å§“å
  maintenancePersonSignature String?     // ç»´ä¿äººå‘˜ç­¾åï¼ˆå›¾ç‰‡ URLï¼‰
  reviewer            String?             // å®¡æ ¸äººå‘˜ ID
  reviewerName        String?             // å®¡æ ¸äººå‘˜å§“å
  reviewerSignature   String?             // å®¡æ ¸äººå‘˜ç­¾åï¼ˆå›¾ç‰‡ URLï¼‰
  reviewDate          DateTime?           // å®¡æ ¸æ—¥æœŸ
  reviewComment       String?             // å®¡æ ¸æ„è§
  status              String   @default("draft") // draft | submitted | approved | rejected
  workflowId          String?             // å·¥ä½œæµå®ä¾‹ ID
  nextMaintenanceDate DateTime?           // ä¸‹æ¬¡ç»´ä¿æ—¥æœŸ
  cost                Float?              // ç»´ä¿æˆæœ¬
  duration            Int?                // ç»´ä¿è€—æ—¶ï¼ˆåˆ†é’Ÿï¼‰
  remark              String?             // å¤‡æ³¨
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt
  
  // å…³è”
  equipment           Equipment @relation(fields: [equipmentId], references: [id])
  
  @@index([equipmentId])
  @@index([maintenanceLevel])
  @@map("maintenance_records")
}
```

### 4.5 è®¾å¤‡æŠ¥ä¿®å•è¡¨ï¼ˆæ–°å¢ï¼‰

```prisma
model EquipmentFault {
  id                String   @id @default(cuid())
  faultNumber       String   @unique           // æŠ¥ä¿®å•å·ï¼Œæ ¼å¼ï¼šFR-{YYYYMMDD}-{åºå·}
  equipmentId       String                     // è®¾å¤‡ ID
  equipmentCode     String                     // è®¾å¤‡ç¼–å·ï¼ˆå†—ä½™ï¼‰
  equipmentName     String                     // è®¾å¤‡åç§°ï¼ˆå†—ä½™ï¼‰
  location          String                     // æŠ¥ä¿®åŒºåŸŸï¼ˆè½¦é—´/æ¥¼å±‚ï¼‰
  
  // ============ æŠ¥ä¿®ä¿¡æ¯ ============
  reporterId        String                     // æŠ¥ä¿®äºº ID
  reporterName      String                     // æŠ¥ä¿®äººå§“å
  reportTime        DateTime @default(now())   // æŠ¥ä¿®æ—¶é—´
  faultDescription  String                     // æ•…éšœæè¿°
  urgencyLevel      String   @default("normal") // ç´§æ€¥ç¨‹åº¦ï¼šurgent(ç´§æ€¥) | normal(ä¸€èˆ¬) | low(ä½)
  
  // ============ ç»´ä¿®ä¿¡æ¯ ============
  status            String   @default("pending") // pending(å¾…å¤„ç†) | in_progress(å¤„ç†ä¸­) | completed(å·²å®Œæˆ) | cancelled(å·²å–æ¶ˆ)
  assignedTo        String?                     // æŒ‡æ´¾ç»™ï¼ˆå·¥ç¨‹éƒ¨äººå‘˜ IDï¼‰
  assignedToName    String?                     // æŒ‡æ´¾ç»™ï¼ˆå·¥ç¨‹éƒ¨äººå‘˜å§“åï¼‰
  acceptedAt        DateTime?                   // æ¥å•æ—¶é—´
  
  // ============ ç»´ä¿®è®°å½•ï¼ˆå®Œæˆæ—¶å¡«å†™ï¼‰============
  faultCause        String?                     // æ•…éšœåŸå› 
  repairMeasure     String?                     // å¤„ç†æªæ–½
  photos            Json?                       // ç°åœºç…§ç‰‡ï¼ˆæ•°ç»„ï¼‰
  repairPerson      String?                     // ç»´ä¿®äººå‘˜ ID
  repairPersonName  String?                     // ç»´ä¿®äººå‘˜å§“å
  repairSignature   String?                     // ç»´ä¿®äººå‘˜ç­¾åï¼ˆå›¾ç‰‡ URLï¼‰
  completedAt       DateTime?                   // å®Œæˆæ—¶é—´
  duration          Int?                        // ç»´ä¿®è€—æ—¶ï¼ˆåˆ†é’Ÿï¼‰
  
  // ============ å¾…åŠä»»åŠ¡ ============
  todoTaskId        String?                     // å¾…åŠä»»åŠ¡ ID
  
  remark            String?                     // å¤‡æ³¨
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
  
  // å…³è”
  equipment         Equipment @relation(fields: [equipmentId], references: [id])
  
  @@index([equipmentId])
  @@index([reporterId])
  @@index([status])
  @@index([urgencyLevel])
  @@index([reportTime])
  @@map("equipment_faults")
}
```

### 4.6 æ•°æ®è¡¨å…³ç³»å›¾

```
Equipment (è®¾å¤‡)
  â”œâ”€ MaintenancePlan (ç»´æŠ¤è®¡åˆ’) 1:N  â† æ”¯æŒåˆ†çº§ä¿å…»ï¼ˆä¸€ä¸ªè®¾å¤‡å¤šä¸ªè®¡åˆ’ï¼‰
  â”œâ”€ MaintenanceRecord (ç»´ä¿è®°å½•) 1:N
  â””â”€ EquipmentFault (æŠ¥ä¿®å•) 1:N  â† æ–°å¢

æ ¸å¿ƒé€»è¾‘:
1. è®¾å¤‡å¯ç”¨åï¼Œæ ¹æ® maintenanceConfig è‡ªåŠ¨ç”Ÿæˆå¤šä¸ªç»´æŠ¤è®¡åˆ’ï¼ˆæ—¥/å‘¨/æœˆ/å­£/å¹´ï¼‰
2. ç»´ä¿è®°å½•æäº¤åï¼Œç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆè¯¥çº§åˆ«çš„ä¸‹æ¬¡ç»´æŠ¤è®¡åˆ’
3. ç»´æŠ¤è®¡åˆ’åˆ°æœŸå‰ N å¤©ï¼Œç”Ÿæˆå¾…åŠä»»åŠ¡ï¼ˆä¸åŒçº§åˆ«æé†’å¤©æ•°ä¸åŒï¼‰
4. ç»´ä¿è®°å½•å®¡æ‰¹é€šè¿‡åï¼Œå…³é—­å¾…åŠä»»åŠ¡
5. å‘˜å·¥å‘èµ·æŠ¥ä¿®åï¼Œè‡ªåŠ¨ç”Ÿæˆå¾…åŠä»»åŠ¡ç»™å·¥ç¨‹éƒ¨
6. å·¥ç¨‹éƒ¨å®Œæˆç»´ä¿®åï¼Œå…³é—­æŠ¥ä¿®å•å’Œå¾…åŠä»»åŠ¡
```

---

## 5. ä¸šåŠ¡è§„åˆ™

### 5.1 è®¾å¤‡å°è´¦è§„åˆ™ï¼ˆBR-181 ~ BR-190ï¼‰

| ç¼–å· | è§„åˆ™ | å®ç°æ–¹å¼ |
|------|------|----------|
| BR-181 | **è®¾å¤‡ç¼–å·å”¯ä¸€**: æ¯ä¸ªè®¾å¤‡çš„ code å¿…é¡»å”¯ä¸€ | `Equipment.code @unique` |
| BR-182 | **è®¾å¤‡åˆ†ç±»**: ç”Ÿäº§è®¾å¤‡/æ£€éªŒè®¾å¤‡/è¾…åŠ©è®¾å¤‡ | `Equipment.category` æšä¸¾ |
| BR-183 | **è®¾å¤‡çŠ¶æ€**: active(å¯ç”¨) / inactive(åœç”¨) / scrapped(æŠ¥åºŸ) | `Equipment.status` æšä¸¾ |
| BR-184 | **ç»´æŠ¤å‘¨æœŸ**: æ¯ä¸ªè®¾å¤‡å¯ä»¥æœ‰ä¸åŒçš„ç»´æŠ¤å‘¨æœŸï¼ˆå¤©æ•°ï¼‰ | `Equipment.maintenanceCycle` |
| BR-185 | **æå‰æé†’**: ç”¨æˆ·å¯è‡ªå®šä¹‰æå‰å‡ å¤©æé†’ï¼ˆé»˜è®¤ 3 å¤©ï¼‰ | `Equipment.reminderDays` |
| BR-186 | **ä¸‹æ¬¡ç»´æŠ¤æ—¥æœŸ**: ç³»ç»Ÿè‡ªåŠ¨è®¡ç®—å¹¶æ›´æ–° | è‡ªåŠ¨è®¡ç®—ï¼šä¸Šæ¬¡ç»´æŠ¤æ—¥æœŸ + ç»´æŠ¤å‘¨æœŸ |
| BR-187 | **è´£ä»»äºº**: æ¯ä¸ªè®¾å¤‡å¿…é¡»æŒ‡å®šè´£ä»»äºº | `Equipment.responsiblePerson` |
| BR-188 | **ä¿ä¿®æœŸ**: è®°å½•ä¿ä¿®åˆ°æœŸæ—¥æœŸï¼Œåˆ°æœŸå‰æé†’ | `Equipment.warrantyExpiry` |
| BR-189 | **è®¾å¤‡æŠ¥åºŸ**: æŠ¥åºŸåä¸å†ç”Ÿæˆç»´æŠ¤è®¡åˆ’ | `status = scrapped` æ—¶åœæ­¢ç”Ÿæˆè®¡åˆ’ |
| BR-190 | **è®¾å¤‡ç¼–å·ç”Ÿæˆ**: æ ¼å¼ `EQ-{YYYYMMDD}-{åºå·}` | åç«¯è‡ªåŠ¨ç”Ÿæˆ |

### 5.2 åˆ†çº§ä¿å…»è§„åˆ™ï¼ˆBR-191 ~ BR-200ï¼‰

| ç¼–å· | è§„åˆ™ | å®ç°æ–¹å¼ |
|------|------|----------|
| BR-191 | **ä¿å…»çº§åˆ«å®šä¹‰**: æ—¥ä¿å…»(daily)/å‘¨ä¿å…»(weekly)/æœˆä¿å…»(monthly)/å­£åº¦ä¿å…»(quarterly)/å¹´åº¦ä¿å…»(annual) | `MaintenancePlan.maintenanceLevel` æšä¸¾ |
| BR-192 | **æ—¥ä¿å…»å‘¨æœŸ**: æ¯å¤©ï¼Œå½“å¤©æ—©ä¸Šæé†’ï¼ˆreminderDays=0ï¼‰ | cycle=1, reminderDays=0 |
| BR-193 | **å‘¨ä¿å…»å‘¨æœŸ**: æ¯å‘¨ï¼Œæå‰1å¤©æé†’ | cycle=7, reminderDays=1 |
| BR-194 | **æœˆä¿å…»å‘¨æœŸ**: æ¯æœˆï¼ˆ30å¤©ï¼‰ï¼Œæå‰3å¤©æé†’ | cycle=30, reminderDays=3 |
| BR-195 | **å­£åº¦ä¿å…»å‘¨æœŸ**: æ¯å­£åº¦ï¼ˆ90å¤©ï¼‰ï¼Œæå‰7å¤©æé†’ | cycle=90, reminderDays=7 |
| BR-196 | **å¹´åº¦ä¿å…»å‘¨æœŸ**: æ¯å¹´ï¼ˆ365å¤©ï¼‰ï¼Œæå‰14å¤©æé†’ | cycle=365, reminderDays=14 |
| BR-197 | **å¤šè®¡åˆ’å¹¶è¡Œ**: ä¸€ä¸ªè®¾å¤‡å¯ä»¥åŒæ—¶æœ‰å¤šä¸ªä¸åŒçº§åˆ«çš„ä¿å…»è®¡åˆ’ | MaintenancePlan ä¸€å¯¹å¤šå…³ç³» |
| BR-198 | **ä¿å…»çº§åˆ«å¿…å¡«**: åˆ›å»ºä¿å…»è®¡åˆ’æ—¶å¿…é¡»æŒ‡å®šçº§åˆ« | `MaintenancePlan.maintenanceLevel` éç©º |
| BR-199 | **ä¸‹æ¬¡è®¡åˆ’ç”Ÿæˆ**: å½“å‰çº§åˆ«ä¿å…»å®Œæˆåï¼Œè‡ªåŠ¨ç”Ÿæˆè¯¥çº§åˆ«çš„ä¸‹æ¬¡è®¡åˆ’ | ä¿å…»æ—¥æœŸ + å¯¹åº”çº§åˆ«å‘¨æœŸ |
| BR-200 | **çµæ´»é…ç½®**: ç”¨æˆ·å¯è‡ªå®šä¹‰å¯ç”¨å“ªäº›ä¿å…»çº§åˆ« | `Equipment.maintenanceConfig` JSON |

### 5.3 ç»´æŠ¤è®¡åˆ’è§„åˆ™ï¼ˆBR-201 ~ BR-210ï¼‰

| ç¼–å· | è§„åˆ™ | å®ç°æ–¹å¼ |
|------|------|----------|
| BR-201 | **è‡ªåŠ¨ç”Ÿæˆ**: è®¾å¤‡å¯ç”¨åæ ¹æ®é…ç½®è‡ªåŠ¨ç”Ÿæˆå¤šä¸ªä¿å…»è®¡åˆ’ | å¯ç”¨æ—¥æœŸ + å¯¹åº”çº§åˆ«å‘¨æœŸ |
| BR-202 | **è®¡åˆ’çŠ¶æ€**: pending(å¾…æ‰§è¡Œ) â†’ in_progress(è¿›è¡Œä¸­) â†’ completed(å·²å®Œæˆ) / cancelled(å·²å–æ¶ˆ) | `MaintenancePlan.status` çŠ¶æ€æœº |
| BR-203 | **æé†’æ—¶æœº**: è®¡åˆ’æ—¥æœŸå‰ N å¤©ç”Ÿæˆå¾…åŠä»»åŠ¡ï¼ˆä¸åŒçº§åˆ«Nä¸åŒï¼‰ | å®šæ—¶ä»»åŠ¡æ£€æŸ¥ |
| BR-204 | **é€¾æœŸæé†’**: è®¡åˆ’æ—¥æœŸè¿‡åä»æœªå®Œæˆï¼ŒæŒç»­æé†’ | å®šæ—¶ä»»åŠ¡æ£€æŸ¥ |
| BR-205 | **å¾…åŠä»»åŠ¡**: ç”Ÿæˆå¾…åŠä»»åŠ¡æ—¶ï¼Œå…³è” TodoTask | `MaintenancePlan.todoTaskId` |
| BR-206 | **è®¡åˆ’å–æ¶ˆ**: è®¾å¤‡åœç”¨/æŠ¥åºŸæ—¶ï¼Œå–æ¶ˆæœªå®Œæˆçš„ç»´æŠ¤è®¡åˆ’ | æ‰¹é‡æ›´æ–° status = cancelled |
| BR-207 | **è®¡åˆ’è°ƒæ•´**: è´£ä»»äººå¯ä»¥å»¶æœŸç»´æŠ¤è®¡åˆ’ï¼ˆéœ€å®¡æ‰¹ï¼‰ | å·¥ä½œæµé›†æˆ |
| BR-208 | **æ—¥å†è§†å›¾**: ç»´æŠ¤è®¡åˆ’åœ¨æ—¥å†ä¸Šæ˜¾ç¤º | å‰ç«¯æ—¥å†ç»„ä»¶ |
| BR-209 | **çœ‹æ¿è§†å›¾**: ç»´æŠ¤è®¡åˆ’åœ¨çœ‹æ¿ä¸Šæ˜¾ç¤ºï¼ˆå¾…æ‰§è¡Œ/è¿›è¡Œä¸­/å·²å®Œæˆï¼‰ | å‰ç«¯çœ‹æ¿ç»„ä»¶ |
| BR-210 | **è®¡åˆ’ç¼–å·**: æ ¼å¼ `MP-{YYYYMMDD}-{åºå·}` | åç«¯è‡ªåŠ¨ç”Ÿæˆ |

### 5.4 ç»´ä¿è®°å½•è§„åˆ™ï¼ˆBR-211 ~ BR-220ï¼‰

| ç¼–å· | è§„åˆ™ | å®ç°æ–¹å¼ |
|------|------|----------|
| BR-211 | **è®°å½•çŠ¶æ€**: draft(è‰ç¨¿) â†’ submitted(å·²æäº¤) â†’ approved(å·²å®¡æ‰¹) / rejected(å·²é©³å›) | `MaintenanceRecord.status` çŠ¶æ€æœº |
| BR-212 | **å¿…å¡«å­—æ®µ**: ç»´ä¿æ—¥æœŸã€ç»´ä¿çº§åˆ«ã€ç»´ä¿å†…å®¹ã€ç»´ä¿äººå‘˜ç­¾å | å‰ç«¯æ ¡éªŒ + åç«¯æ ¡éªŒ |
| BR-213 | **ç°åœºæ‹ç…§**: æ”¯æŒä¸Šä¼ å¤šå¼ ç…§ç‰‡ï¼ˆæœ€å¤š 9 å¼ ï¼‰ | `MaintenanceRecord.photos` JSON æ•°ç»„ |
| BR-214 | **ç”µå­ç­¾å**: ç»´ä¿äººå‘˜å’Œå®¡æ ¸äººå‘˜å¿…é¡»ç”µå­ç­¾å | æ‰‹å†™ç­¾å­—æ¿ |
| BR-215 | **å®¡æ‰¹æµç¨‹**: ç»´ä¿è®°å½•æäº¤åï¼Œç”Ÿæˆå®¡æ‰¹å¾…åŠä»»åŠ¡ | å·¥ä½œæµé›†æˆ |
| BR-216 | **å®¡æ‰¹é€šè¿‡**: å®¡æ‰¹é€šè¿‡åï¼Œå…³é—­ç»´ä¿å¾…åŠä»»åŠ¡ï¼Œç”Ÿæˆè¯¥çº§åˆ«çš„ä¸‹æ¬¡ç»´æŠ¤è®¡åˆ’ | è‡ªåŠ¨è§¦å‘ |
| BR-217 | **å®¡æ‰¹é©³å›**: å®¡æ‰¹é©³å›åï¼Œç»´ä¿è®°å½•å›åˆ°è‰ç¨¿çŠ¶æ€ï¼Œå¯ä¿®æ”¹é‡æ–°æäº¤ | çŠ¶æ€å›é€€ |
| BR-218 | **ç¦»çº¿å¡«å†™**: ç§»åŠ¨ç«¯æ”¯æŒç¦»çº¿å¡«å†™ï¼Œè”ç½‘åè‡ªåŠ¨åŒæ­¥ | æœ¬åœ°å­˜å‚¨ + åŒæ­¥é˜Ÿåˆ— |
| BR-219 | **è®°å½•ç¼–å·**: æ ¼å¼ `MAINT-{YYYYMMDD}-{åºå·}` | åç«¯è‡ªåŠ¨ç”Ÿæˆ |
| BR-220 | **è®°å½•æŸ¥è¯¢**: æ”¯æŒæŒ‰è®¾å¤‡/æ—¥æœŸ/çº§åˆ«/ç±»å‹/è´£ä»»äººæŸ¥è¯¢ | æŸ¥è¯¢ API |

### 5.5 è®¾å¤‡æŠ¥ä¿®è§„åˆ™ï¼ˆBR-221 ~ BR-230ï¼‰

| ç¼–å· | è§„åˆ™ | å®ç°æ–¹å¼ |
|------|------|----------|
| BR-221 | **æ‰€æœ‰å‘˜å·¥å¯å‘èµ·æŠ¥ä¿®**: ä»»ä½•å‘˜å·¥éƒ½å¯ä»¥æäº¤è®¾å¤‡æŠ¥ä¿®å• | å‰ç«¯æƒé™æ§åˆ¶ + API æƒé™æ£€æŸ¥ |
| BR-222 | **æŠ¥ä¿®å•å·è‡ªåŠ¨ç”Ÿæˆ**: æ ¼å¼ `FR-{YYYYMMDD}-{åºå·}` | åç«¯è‡ªåŠ¨ç”Ÿæˆ |
| BR-223 | **è‡ªåŠ¨ç”Ÿæˆå¾…åŠä»»åŠ¡**: æŠ¥ä¿®å•æäº¤åï¼Œè‡ªåŠ¨ä¸ºå·¥ç¨‹éƒ¨ç”Ÿæˆå¾…åŠ | TodoTask é›†æˆ |
| BR-224 | **ç´§æ€¥æŠ¥ä¿®ä¼˜å…ˆçº§é«˜**: urgent çº§åˆ«çš„æŠ¥ä¿®å•ä¼˜å…ˆæ˜¾ç¤º | å¾…åŠä»»åŠ¡ä¼˜å…ˆçº§è®¾ç½® |
| BR-225 | **æ¥å•åçŠ¶æ€å˜æ›´**: å·¥ç¨‹éƒ¨äººå‘˜æ¥å•åï¼ŒçŠ¶æ€å˜ä¸º in_progress | çŠ¶æ€æœº |
| BR-226 | **å®Œæˆç»´ä¿®åå…³é—­å¾…åŠ**: æäº¤å®Œæˆå·¥å•åï¼Œå…³é—­å¯¹åº”çš„å¾…åŠä»»åŠ¡ | TodoTask çŠ¶æ€æ›´æ–° |
| BR-227 | **ç§»åŠ¨ç«¯æ”¯æŒ**: å·¥ç¨‹éƒ¨äººå‘˜å¯åœ¨ç§»åŠ¨ç«¯å¡«å†™ç»´ä¿®è®°å½•ã€æ‹ç…§ã€ç­¾å | uniapp ç§»åŠ¨ç«¯ |
| BR-228 | **æŠ¥ä¿®å•ä¸å¯åˆ é™¤**: åªèƒ½å–æ¶ˆï¼Œä¿ç•™å†å²è®°å½• | è½¯åˆ é™¤æˆ–çŠ¶æ€æ ‡è®° |
| BR-229 | **æŠ¥ä¿®ç»Ÿè®¡**: ç»Ÿè®¡æ¯æœˆæŠ¥ä¿®æ¬¡æ•°ã€å¹³å‡å“åº”æ—¶é—´ã€å®Œæˆç‡ | å®šæ—¶ä»»åŠ¡ + ç»Ÿè®¡ API |
| BR-230 | **åŒºåŸŸè®¾å¤‡è”åŠ¨**: é€‰æ‹©åŒºåŸŸåï¼Œè‡ªåŠ¨è¿‡æ»¤è¯¥åŒºåŸŸçš„è®¾å¤‡ | å‰ç«¯è”åŠ¨ + Equipment.location |

---

## 6. API è®¾è®¡

### 6.1 è®¾å¤‡å°è´¦ APIï¼ˆ6 ä¸ªï¼‰

| æ–¹æ³• | è·¯å¾„ | åŠŸèƒ½ | è¯·æ±‚ä½“ | å“åº” |
|------|------|------|--------|------|
| GET | `/api/equipment` | æŸ¥è¯¢è®¾å¤‡åˆ—è¡¨ | `?page=1&limit=20&category=&status=` | `{ items: Equipment[], total: number }` |
| GET | `/api/equipment/:id` | æŸ¥è¯¢è®¾å¤‡è¯¦æƒ… | - | `Equipment` |
| POST | `/api/equipment` | åˆ›å»ºè®¾å¤‡ | `{ code, name, category, ... }` | `Equipment` |
| PUT | `/api/equipment/:id` | æ›´æ–°è®¾å¤‡ | `{ name, location, ... }` | `Equipment` |
| DELETE | `/api/equipment/:id` | åˆ é™¤è®¾å¤‡ | - | `{ success: true }` |
| PUT | `/api/equipment/:id/status` | æ›´æ–°è®¾å¤‡çŠ¶æ€ | `{ status: 'scrapped' }` | `Equipment` |

### 6.2 ç»´æŠ¤è®¡åˆ’ APIï¼ˆ6 ä¸ªï¼‰

| æ–¹æ³• | è·¯å¾„ | åŠŸèƒ½ | è¯·æ±‚ä½“ | å“åº” |
|------|------|------|--------|------|
| GET | `/api/maintenance-plans` | æŸ¥è¯¢ç»´æŠ¤è®¡åˆ’åˆ—è¡¨ | `?status=&equipmentId=&startDate=&endDate=` | `MaintenancePlan[]` |
| GET | `/api/maintenance-plans/:id` | æŸ¥è¯¢ç»´æŠ¤è®¡åˆ’è¯¦æƒ… | - | `MaintenancePlan` |
| GET | `/api/maintenance-plans/calendar` | æ—¥å†è§†å›¾æ•°æ® | `?year=2024&month=2` | `{ [date]: MaintenancePlan[] }` |
| POST | `/api/maintenance-plans/:id/start` | å¼€å§‹ç»´ä¿ | - | `{ success: true }` |
| POST | `/api/maintenance-plans/:id/complete` | å®Œæˆç»´ä¿ | - | `{ success: true }` |
| POST | `/api/maintenance-plans/:id/cancel` | å–æ¶ˆç»´ä¿ | `{ reason }` | `{ success: true }` |

### 6.3 ç»´ä¿è®°å½• APIï¼ˆ6 ä¸ªï¼‰

| æ–¹æ³• | è·¯å¾„ | åŠŸèƒ½ | è¯·æ±‚ä½“ | å“åº” |
|------|------|------|--------|------|
| GET | `/api/maintenance-records` | æŸ¥è¯¢ç»´ä¿è®°å½•åˆ—è¡¨ | `?status=&equipmentId=&startDate=&endDate=` | `MaintenanceRecord[]` |
| GET | `/api/maintenance-records/:id` | æŸ¥è¯¢ç»´ä¿è®°å½•è¯¦æƒ… | - | `MaintenanceRecord` |
| POST | `/api/maintenance-records` | åˆ›å»ºç»´ä¿è®°å½• | `{ equipmentId, maintenanceDate, ... }` | `MaintenanceRecord` |
| PUT | `/api/maintenance-records/:id` | æ›´æ–°ç»´ä¿è®°å½•ï¼ˆè‰ç¨¿çŠ¶æ€ï¼‰ | `{ maintenanceContent, photos, ... }` | `MaintenanceRecord` |
| POST | `/api/maintenance-records/:id/submit` | æäº¤å®¡æ‰¹ | - | `{ success: true, workflowId }` |
| POST | `/api/maintenance-records/:id/approve` | å®¡æ‰¹é€šè¿‡ | `{ reviewComment, reviewerSignature }` | `{ success: true }` |

### 6.4 è®¾å¤‡æŠ¥ä¿® APIï¼ˆ8 ä¸ªï¼‰

| æ–¹æ³• | è·¯å¾„ | åŠŸèƒ½ | è¯·æ±‚ä½“ | å“åº” |
|------|------|------|--------|------|
| POST | `/api/equipment/faults` | å‘èµ·æŠ¥ä¿®ï¼ˆæ‰€æœ‰å‘˜å·¥ï¼‰ | `{ equipmentId, location, faultDescription, urgencyLevel }` | `EquipmentFault` |
| GET | `/api/equipment/faults` | æŸ¥è¯¢æŠ¥ä¿®å•åˆ—è¡¨ï¼ˆå·¥ç¨‹éƒ¨ï¼‰ | `?status=&urgencyLevel=&page=1&limit=20` | `{ items: EquipmentFault[], total }` |
| GET | `/api/equipment/faults/my` | æŸ¥è¯¢æˆ‘çš„æŠ¥ä¿®å•ï¼ˆæ™®é€šå‘˜å·¥ï¼‰ | `?page=1&limit=20` | `{ items: EquipmentFault[], total }` |
| GET | `/api/equipment/faults/:id` | æŸ¥è¯¢æŠ¥ä¿®å•è¯¦æƒ… | - | `EquipmentFault` |
| POST | `/api/equipment/faults/:id/accept` | æ¥å•ï¼ˆå·¥ç¨‹éƒ¨äººå‘˜ï¼‰ | `{ assignedTo }` | `{ success: true }` |
| POST | `/api/equipment/faults/:id/complete` | å®Œæˆç»´ä¿®ï¼ˆå·¥ç¨‹éƒ¨ï¼Œç§»åŠ¨ç«¯ï¼‰ | `{ faultCause, repairMeasure, photos, repairSignature, duration }` | `{ success: true }` |
| POST | `/api/equipment/faults/:id/cancel` | å–æ¶ˆæŠ¥ä¿®ï¼ˆæŠ¥ä¿®äººï¼‰ | `{ reason }` | `{ success: true }` |
| GET | `/api/equipment/faults/stats` | æŠ¥ä¿®ç»Ÿè®¡ | `?startDate=&endDate=` | `{ totalFaults, avgResponseTime, completionRate }` |

---

## 7. å‰ç«¯è®¾è®¡

### 7.1 PC ç«¯é¡µé¢åˆ—è¡¨

| é¡µé¢è·¯å¾„ | é¡µé¢åç§° | åŠŸèƒ½ |
|---------|---------|------|
| `/equipment/list` | è®¾å¤‡å°è´¦åˆ—è¡¨ | è®¾å¤‡åˆ—è¡¨ã€æ–°å¢ã€ç¼–è¾‘ã€åˆ é™¤ã€çŠ¶æ€ç®¡ç† |
| `/equipment/detail/:id` | è®¾å¤‡è¯¦æƒ… | æŸ¥çœ‹è®¾å¤‡è¯¦æƒ…ã€ç»´ä¿å†å²ã€ç»´æŠ¤è®¡åˆ’ |
| `/maintenance/plans` | ç»´æŠ¤è®¡åˆ’åˆ—è¡¨ | ç»´æŠ¤è®¡åˆ’åˆ—è¡¨ã€ç­›é€‰ã€å¼€å§‹/å®Œæˆ/å–æ¶ˆ |
| `/maintenance/calendar` | ç»´æŠ¤è®¡åˆ’æ—¥å† | æ—¥å†è§†å›¾ã€ç‚¹å‡»æŸ¥çœ‹å½“å¤©è®¡åˆ’ |
| `/maintenance/records` | ç»´ä¿è®°å½•åˆ—è¡¨ | ç»´ä¿è®°å½•åˆ—è¡¨ã€æŸ¥è¯¢ã€æŸ¥çœ‹è¯¦æƒ…ã€å®¡æ‰¹ |

### 7.2 ç§»åŠ¨ç«¯é¡µé¢åˆ—è¡¨ï¼ˆuniappï¼‰

| é¡µé¢è·¯å¾„ | é¡µé¢åç§° | åŠŸèƒ½ |
|---------|---------|------|
| `/pages/equipment/list` | è®¾å¤‡åˆ—è¡¨ | æŸ¥çœ‹è®¾å¤‡åˆ—è¡¨ã€æœç´¢ |
| `/pages/equipment/detail` | è®¾å¤‡è¯¦æƒ… | æŸ¥çœ‹è®¾å¤‡è¯¦æƒ…ã€æ‰«ç è¯†åˆ« |
| `/pages/maintenance/todo` | ç»´ä¿å¾…åŠ | æŸ¥çœ‹ç»´ä¿å¾…åŠã€å¼€å§‹ç»´ä¿ |
| `/pages/maintenance/create` | å¡«å†™ç»´ä¿è®°å½• | åœ¨çº¿å¡«å†™ã€æ‹ç…§ã€ç­¾å |
| `/pages/maintenance/calendar` | ç»´æŠ¤è®¡åˆ’æ—¥å† | æ—¥å†è§†å›¾ã€ç‚¹å‡»æŸ¥çœ‹ |

### 7.3 å¼€å‘å·¥ä½œé‡ä¼°ç®—

| é˜¶æ®µ | å·¥ä½œé‡ | è¯´æ˜ |
|------|--------|------|
| **åç«¯å¼€å‘** | 2 å‘¨ | è®¾å¤‡å°è´¦(3å¤©) + ç»´æŠ¤è®¡åˆ’(3å¤©) + ç»´ä¿è®°å½•(3å¤©) + API(2å¤©) + æµ‹è¯•(1å¤©) |
| **å‰ç«¯å¼€å‘ï¼ˆPC + ç§»åŠ¨ç«¯ï¼‰** | 3 å‘¨ | PCç«¯(1.5å‘¨) + ç§»åŠ¨ç«¯uniapp(1å‘¨) + E2Eæµ‹è¯•(0.5å‘¨) |
| **è”è°ƒæµ‹è¯•** | 0.5 å‘¨ | å‰åç«¯ + ç§»åŠ¨ç«¯è”è°ƒ |
| **æ–‡æ¡£ç¼–å†™** | 0.5 å‘¨ | API æ–‡æ¡£ã€ç”¨æˆ·æ‰‹å†Œ |

**æ€»è®¡**: 6 å‘¨  
**å¹¶è¡Œå¼€å‘**ï¼ˆ1 ååç«¯ + 1 åå‰ç«¯ï¼‰: **çº¦ 3 å‘¨**

### 7.4 æˆåŠŸæ ‡å‡†

**è®¾å¤‡å°è´¦ç®¡ç†**:
- âœ… æ”¯æŒè®¾å¤‡åˆ†ç±»ã€çŠ¶æ€ç®¡ç†
- âœ… æ”¯æŒåˆ†çº§ä¿å…»é…ç½®ï¼ˆæ—¥/å‘¨/æœˆ/å­£/å¹´ï¼‰

**ç»´æŠ¤è®¡åˆ’ç®¡ç†**:
- âœ… ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆå¤šçº§ä¿å…»è®¡åˆ’
- âœ… ä¸åŒçº§åˆ«æå‰æé†’å¤©æ•°ä¸åŒ
- âœ… æ—¥å†è§†å›¾æ¸…æ™°å±•ç¤ºç»´æŠ¤è®¡åˆ’

**ç»´ä¿è®°å½•ç®¡ç†**:
- âœ… ç§»åŠ¨ç«¯åœ¨çº¿å¡«å†™ï¼ˆæ‹ç…§ã€ç­¾åï¼‰
- âœ… æ”¯æŒç¦»çº¿å¡«å†™ã€è”ç½‘åŒæ­¥
- âœ… å®¡æ‰¹é€šè¿‡åè‡ªåŠ¨å…³é—­å¾…åŠå¹¶ç”Ÿæˆè¯¥çº§åˆ«ä¸‹æ¬¡è®¡åˆ’

**è®¾å¤‡æŠ¥ä¿®åŠŸèƒ½ï¼ˆæ–°å¢ï¼‰**:
- âœ… æ‰€æœ‰å‘˜å·¥å¯å‘èµ·æŠ¥ä¿®
- âœ… é€‰æ‹©åŒºåŸŸè‡ªåŠ¨è¿‡æ»¤è®¾å¤‡
- âœ… è‡ªåŠ¨ç”Ÿæˆå¾…åŠä»»åŠ¡ç»™å·¥ç¨‹éƒ¨
- âœ… å·¥ç¨‹éƒ¨ç§»åŠ¨ç«¯å®Œæˆç»´ä¿®
- âœ… æŠ¥ä¿®ç»Ÿè®¡åˆ†æ

**ç§»åŠ¨ç«¯æ”¯æŒ**:
- âœ… å¾®ä¿¡å°ç¨‹åº + H5 + APP
- âœ… ç°åœºæ‹ç…§ã€ç”µå­ç­¾å
- âœ… ç¦»çº¿å¡«å†™ã€è‡ªåŠ¨åŒæ­¥

---

**æœ¬æ–‡æ¡£å®Œæˆ âœ…**
