# 场景与专项测试用例清单

> 文档版本: 2.0
> 最后更新: 2026-02-06
> 适用: 文档管理系统 MVP Phase 1-6 + Phase 7-12（已规划）
> 类型: 场景测试 + 专项测试
> 项目状态: MVP 98.1% 完成 | Phase 7-12 设计完成

---

## 一、业务场景测试

### 1.1 管理员场景

#### 系统管理
- [ ] **ADMIN-SYS-001**: 创建管理员账号 (P0)
- [ ] **ADMIN-SYS-002**: 分配管理员权限 (P0)
- [ ] **ADMIN-SYS-003**: 撤销管理员权限 (P0)
- [ ] **ADMIN-SYS-004**: 查看所有用户 (P0)
- [ ] **ADMIN-SYS-005**: 审核所有文件 (P0)
- [ ] **ADMIN-SYS-006**: 取消任何任务 (P0)
- [ ] **ADMIN-SYS-007**: 查看操作日志 (P0)
- [ ] **ADMIN-SYS-008**: 导出所有数据 (P0)

#### 数据管理
- [ ] **ADMIN-DATA-001**: 批量导入用户 (P2)
- [ ] **ADMIN-DATA-002**: 批量导出用户 (P1)
- [ ] **ADMIN-DATA-003**: 数据备份 (P0)
- [ ] **ADMIN-DATA-004**: 数据恢复 (P0)
- [ ] **ADMIN-DATA-005**: 清空测试数据 (P1)

#### 系统配置
- [ ] **ADMIN-CFG-001**: 修改系统配置 (P1)
- [ ] **ADMIN-CFG-002**: 查看系统信息 (P1)
- [ ] **ADMIN-CFG-003**: 锁定系统 (P1)
- [ ] **ADMIN-CFG-004**: 解锁系统 (P1)

### 1.2 部门负责人场景

#### 团队管理
- [ ] **LEADER-TEAM-001**: 查看本部门用户 (P0)
- [ ] **LEADER-TEAM-002**: 查看本部门文件 (P0)
- [ ] **LEADER-TEAM-003**: 查看本部门任务 (P0)
- [ ] **LEADER-TEAM-004**: 审批本部门文件 (P0)

#### 任务分发
- [ ] **LEADER-TASK-001**: 向本部门分发任务 (P0)
- [ ] **LEADER-TASK-002**: 向其他部门分发 (P0)
- [ ] **LEADER-TASK-003**: 查看任务完成情况 (P0)
- [ ] **LEADER-TASK-004**: 催办任务 (P0)

### 1.3 普通用户场景

#### 个人操作
- [ ] **USER-PERSONAL-001**: 查看可访问文件 (P0)
- [ ] **USER-PERSONAL-002**: 下载文件 (P0)
- [ ] **USER-PERSONAL-003**: 上传文件 (P0)
- [ ] **USER-PERSONAL-004**: 查看我的任务 (P0)
- [ ] **USER-PERSONAL-005**: 填写任务 (P0)
- [ ] **USER-PERSONAL-006**: 查看消息 (P0)
- [ ] **USER-PERSONAL-007**: 修改密码 (P0)
- [ ] **USER-PERSONAL-008**: 查看个人信息 (P0)

#### 协作场景
- [ ] **USER-COLLAB-001**: 查看同事文件 (P0)
- [ ] **USER-COLLAB-002**: 部门内任务协作 (P0)
- [ ] **USER-COLLAB-003**: 审批我的文件 (P1)
- [ ] **USER-COLLAB-004**: 查看审批进度 (P0)

### 1.4 审批人场景

#### 审批操作
- [ ] **APPROVER-001**: 查看待审批列表 (P0)
- [ ] **APPROVER-002**: 审批文件 (P0)
- [ ] **APPROVER-003**: 审批任务 (P0)
- [ ] **APPROVER-004**: 查看审批历史 (P0)
- [ ] **APPROVER-005**: 查看审批统计 (P0)

#### 审批效率
- [ ] **APPROVER-EFF-001**: 批量审批 (P1)
- [ ] **APPROVER-EFF-002**: 快捷审批 (P1)
- [ ] **APPROVER-EFF-003**: 审批模板 (P1)

---

## 二、专项测试

### 2.1 边界条件测试

#### 数值边界
- [ ] **BOUND-NUM-001**: 文件大小-边界值 10MB (P0)
- [ ] **BOUND-NUM-002**: 文件大小-超限 10.1MB (P0)
- [ ] **BOUND-NUM-003**: 用户名-最短 3位 (P0)
- [ ] **BOUND-NUM-004**: 用户名-太短 2位 (P0)
- [ ] **BOUND-NUM-005**: 密码-最短 8位 (P0)
- [ ] **BOUND-NUM-006**: 密码-太短 7位 (P0)

#### 列表边界
- [ ] **BOUND-LIST-001**: 空列表 (P0)
- [ ] **BOUND-LIST-002**: 单条数据 (P0)
- [ ] **BOUND-LIST-003**: 最后一页 (P0)
- [ ] **BOUND-LIST-004**: 超出范围翻页 (P0)
- [ ] **BOUND-LIST-005**: 每页条数边界 (P0)

#### 字符串边界
- [ ] **BOUND-STR-001**: 空字符串 (P0)
- [ ] **BOUND-STR-002**: 超长字符串 (P0)
- [ ] **BOUND-STR-003**: 特殊字符 (P0)
- [ ] **BOUND-STR-004**: Unicode字符 (P0)
- [ ] **BOUND-STR-005**: SQL注入字符 (P0)

#### 时间边界
- [ ] **BOUND-TIME-001**: 截止日期-今天 (P0)
- [ ] **BOUND-TIME-002**: 截止日期-昨天 (P0)
- [ ] **BOUND-TIME-003**: 截止日期-明年 (P0)
- [ ] **BOUND-TIME-004**: 时区处理 (P1)
- [ ] **BOUND-TIME-005**: 闰年处理 (P1)

### 2.2 异常处理测试

#### 网络异常
- [ ] **ERR-NET-001**: 网络中断-上传 (P0)
- [ ] **ERR-NET-002**: 网络中断-下载 (P0)
- [ ] **ERR-NET-003**: 网络中断-列表加载 (P0)
- [ ] **ERR-NET-004**: 网络慢-超时 (P1)
- [ ] **ERR-NET-005**: 断线重连 (P1)

#### 服务异常
- [ ] **ERR-SRV-001**: 数据库连接失败 (P0)
- [ ] **ERR-SRV-002**: MinIO连接失败 (P0)
- [ ] **ERR-SRV-003**: Redis连接失败 (P1)
- [ ] **ERR-SRV-404**: 服务不存在 (P0)
- [ ] **ERR-SRV-500**: 服务器错误 (P0)

#### 数据异常
- [ ] **ERR-DATA-001**: 脏数据-状态异常 (P0)
- [ ] **ERR-DATA-002**: 脏数据-外键缺失 (P0)
- [ ] **ERR-DATA-003**: 脏数据-格式错误 (P0)
- [ ] **ERR-DATA-004**: 并发修改-覆盖 (P0)
- [ ] **ERR-DATA-005**: 并发删除-访问 (P0)

### 2.3 恢复测试

#### 数据恢复
- [ ] **RECO-DATA-001**: 回收站-恢复 (P0)
- [ ] **RECO-DATA-002**: 回收站-彻底删除 (P0)
- [ ] **RECO-DATA-003**: 回收站-自动清理 7天 (P0)
- [ ] **RECO-DATA-004**: 数据库恢复 (P0)

#### 系统恢复
- [ ] **RECO-SYS-001**: 服务重启 (P0)
- [ ] **RECO-SYS-002**: 服务崩溃恢复 (P0)
- [ ] **RECO-SYS-003**: 断电恢复 (P0)
- [ ] **RECO-SYS-004**: 回滚版本 (P0)

### 2.4 日志审计测试

#### 操作日志
- [ ] **LOG-OP-001**: 登录日志 (P0)
- [ ] **LOG-OP-002**: 登出日志 (P0)
- [ ] **LOG-OP-003**: 操作日志-创建 (P0)
- [ ] **LOG-OP-004**: 操作日志-修改 (P0)
- [ ] **LOG-OP-005**: 操作日志-删除 (P0)
- [ ] **LOG-OP-006**: 操作日志-审批 (P0)
- [ ] **LOG-OP-007**: 日志查询 (P0)
- [ ] **LOG-OP-008**: 日志导出 (P0)

#### 安全日志
- [ ] **LOG-SEC-001**: 失败登录日志 (P0)
- [ ] **LOG-SEC-002**: 锁定日志 (P0)
- [ ] **LOG-SEC-003**: 权限拒绝日志 (P0)
- [ ] **LOG-SEC-004**: 敏感操作日志 (P0)

### 2.5 部署测试

#### Docker部署
- [ ] **DEPLOY-DOCKER-001**: Docker服务启动 (P0)
- [ ] **DEPLOY-DOCKER-002**: Docker服务停止 (P0)
- [ ] **DEPLOY-DOCKER-003**: 服务健康检查 (P0)
- [ ] **DEPLOY-DOCKER-004**: 数据持久化 (P0)
- [ ] **DEPLOY-DOCKER-005**: 日志查看 (P0)

#### 环境配置
- [ ] **DEPLOY-CFG-001**: 环境变量加载 (P0)
- [ ] **DEPLOY-CFG-002**: 数据库连接 (P0)
- [ ] **DEPLOY-CFG-003**: MinIO连接 (P0)
- [ ] **DEPLOY-CFG-004**: Redis连接 (P0)

### 2.6 配置测试

#### 系统配置
- [ ] **CFG-SYS-001**: 文件大小限制 10MB (P0)
- [ ] **CFG-SYS-002**: 登录锁定次数 5次 (P0)
- [ ] **CFG-SYS-003**: Token有效期 7天 (P0)
- [ ] **CFG-SYS-004**: 消息保留天数 30天 (P0)
- [ ] **CFG-SYS-005**: 回收站保留天数 7天 (P0)

### 2.7 升级迁移测试

#### 版本升级
- [ ] **UPGRADE-001**: 数据库迁移 (P0)
- [ ] **UPGRADE-002**: 数据完整性 (P0)
- [ ] **UPGRADE-003**: 回滚能力 (P0)
- [ ] **UPGRADE-004**: 兼容性 (P0)

---

## 统计

| 模块 | P0 | P1 | P2 | 合计 |
|------|----|----|----|------|
| 管理员场景 | 10 | 8 | 5 | 23 |
| 部门负责人场景 | 8 | 0 | 0 | 8 |
| 普通用户场景 | 12 | 1 | 0 | 13 |
| 审批人场景 | 5 | 3 | 0 | 8 |
| 边界条件测试 | 16 | 2 | 0 | 18 |
| 异常处理测试 | 10 | 2 | 0 | 12 |
| 恢复测试 | 8 | 0 | 0 | 8 |
| 日志审计测试 | 12 | 0 | 0 | 12 |
| 部署测试 | 9 | 0 | 0 | 9 |
| 配置测试 | 5 | 0 | 0 | 5 |
| 升级迁移测试 | 4 | 0 | 0 | 4 |
| **合计** | **99** | **16** | **5** | **120** |

---

## 附录

### 优先级说明
| 优先级 | 说明 | 执行时机 |
|--------|------|----------|
| P0 | 核心功能，必须通过 | 每次构建必测 |
| P1 | 重要功能，建议通过 | 每次构建测试 |
| P2 | 一般功能，可以通过 | 回归测试 |

---

> **文档版本**: 2.0
> **最后更新**: 2026-02-06
> **用例总数**: 120条（MVP Phase 1-6）
> **Phase 7-12 场景**:
>   - 偏离检测场景（配方员工填写、主管审查偏离、偏离报告导出）
>   - 2级审批场景（L1审批→L2审批→完成/驳回）
>   - 文件预览场景（PDF直接预览、Word/Excel转换预览）
>   - 统计分析场景（偏离趋势查看、部门对比）
>   - 数据导出场景（批量导出偏离报告、统计结果）
> **相关文档**: 详见 docs/DESIGN.md 第十六章
